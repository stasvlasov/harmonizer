#+title: Cockburn, et al. (2009) - Harmonization Procedure

Tangle code:
#+BEGIN_SRC emacs-lisp :results none
  (org-babel-tangle-file (buffer-file-name) nil 'R)
#+END_SRC

Load code:
#+BEGIN_SRC R :results silent :tangle no :session
  ## Load all my functions
  source("R/cockburn.r")
  ## Load data used in funcitons
  load("R/sysdata.rda")
#+END_SRC

* Utils
** cockburn.combabbrev
:PROPERTIES:
:ID:       org:z3bhq6914gi0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Collapses single character sequences
  ##'
  ##' @param x Object (table or vector)
  ##' @param wrap.in.spaces Whether to wrap strings in spaces before processing because the algorithm assumes assumes that each string begins and ends with space. Default is TRUE.
  ##' @inheritDotParams harmonize.x
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @import magrittr
  ##' @export 
  cockburn.combabbrev <- function(x
                                , wrap.in.spaces = TRUE
                                , ...) {
    x.vector <-
      harmonize.x(x, ...) %>%
      ## wrap in spaces
      {if(wrap.in.spaces) paste0(" ", ., " ") else .}
    ## collapse
    sapply(x.vector, function(org.name) {
      reg  <- gregexpr("(?=\\s\\w(\\s+)\\w\\s)", org.name, perl = TRUE)
      ## check if there are matches
      if(reg[[1]][1] != -1) {
        char <- strsplit(org.name, "", fixed = TRUE) %>% unlist
        pos <- mapply(function(from, length.out) seq(from, length.out = length.out)
                    , from = attr(reg[[1]],"capture.start")
                    , length.out = attr(reg[[1]],"capture.length")
                    , SIMPLIFY = FALSE) %>% unlist
        char %>% inset(pos, "") %>% paste(collapse = "")
      } else org.name
    }) %>% harmonize.x(x, ., ...)
  }

  ## ## test
  ## c(" A B Comp"
  ## , " A  B Comp a"
  ## , " I B M "
  ## , "I B M bla-bla n bla C O") %>%
  ##   cockburn.combabbrev

  ## data.table(name = c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
  ##                   , "MSLab CÖ. <a href=lsdldf> <br> <\\a>"
  ##                   , " M S Lab Co."
  ##                   , "MSLaeb Comp."
  ##                   , "MSLab Comp. Ltd."
  ##                   , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ") %>% rep(20)
  ##          , foo = "I love coffee" ) %>%
  ##   cockburn.combabbrev


  ## c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
  ## , "MSLab CÖ. <a href=lsdldf> <br> <\\a>"
  ## , "MSLab Co."
  ## , "MSLaeb Comp."
  ## , "MSLab Comp. Ltd."
  ## , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ") %>%
  ##   cockburn.combabbrev
#+END_SRC

* Standartization
** Derwent
:PROPERTIES:
:ID:       org:y5ghq6914gi0
:END:

Implementation of derwent_standardisation_BHH.do from https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded

"This is practically code for the Derwent standard. However, with these commands the order they are executed is key and has been changed. The following is a list of other changes:

1) Processing for und and et removed.
2) LIMITED -> LTD added by BHH
3) various US changes by BHH
4) space before and after added by BHH"


#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Performs Derwent standardization of organizational names
  ##'
  ##' It is a version from Cockburn, I. M., A. Agrawal, J. Bessen, J. H. S. Graham, B. H. Hall, and M. MacGarvie (2009), The NBER Patent Citations Datafile Update. It differs from original dervert standartization
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.replace.derwent <- function(x
                             , ...) {
    harmonize.replace(x
                    , patterns = cockburn.patterns.derwent
                    , patterns.mode = "first"
                    , ...)
  }


#+END_SRC

*** Derwent Standartization Table
#+call: make-rds-patterns-table(data = cockburn.patterns.derwent, data.name = "cockburn.patterns.derwent"))
#+NAME: cockburn.patterns.derwent
| pattern                                                                        | replacement          |
|--------------------------------------------------------------------------------+----------------------|
| ' A B '                                                                        | ' AB '               |
| ' A CALIFORNIA CORP '                                                          | ' CORP '             |
| ' A DELAWARE CORP '                                                            | ' CORP '             |
| ' AKTIEBOLAGET '                                                               | ' AB '               |
| ' AKTIEBOLAG '                                                                 | ' AB '               |
| ' ACADEMY '                                                                    | ' ACAD '             |
| ' ACTIEN GESELLSCHAFT '                                                        | ' AG '               |
| ' ACTIENGESELLSCHAFT '                                                         | ' AG '               |
| ' AKTIEN GESELLSCHAFT '                                                        | ' AG '               |
| ' AKTIENGESELLSCHAFT '                                                         | ' AG '               |
| ' AGRICOLAS '                                                                  | ' AGRIC '            |
| ' AGRICOLA '                                                                   | ' AGRIC '            |
| ' AGRICOLES '                                                                  | ' AGRIC '            |
| ' AGRICOLE '                                                                   | ' AGRIC '            |
| ' AGRICOLI '                                                                   | ' AGRIC '            |
| ' AGRICOLTURE '                                                                | ' AGRIC '            |
| ' AGRICULTURA '                                                                | ' AGRIC '            |
| ' AGRICULTURAL '                                                               | ' AGRIC '            |
| ' AGRICULTURE '                                                                | ' AGRIC '            |
| ' AKADEMIA '                                                                   | ' AKAD '             |
| ' AKADEMIEI '                                                                  | ' AKAD '             |
| ' AKADEMIE '                                                                   | ' AKAD '             |
| ' AKADEMII '                                                                   | ' AKAD '             |
| ' AKADEMIJA '                                                                  | ' AKAD '             |
| ' AKADEMIYA '                                                                  | ' AKAD '             |
| ' AKADEMIYAKH '                                                                | ' AKAD '             |
| ' AKADEMIYAM '                                                                 | ' AKAD '             |
| ' AKADEMIYAMI '                                                                | ' AKAD '             |
| ' AKADEMIYU '                                                                  | ' AKAD '             |
| ' AKADEMI '                                                                    | ' AKAD '             |
| ' ALLGEMEINER '                                                                | ' ALLG '             |
| ' ALLGEMEINE '                                                                 | ' ALLG '             |
| ' ANTREPRIZA '                                                                 | ' ANTR '             |
| ' APARARII '                                                                   | ' APAR '             |
| ' APARATELOR '                                                                 | ' APAR '             |
| ' APPARATEBAU '                                                                | ' APP '              |
| ' APPARATUS '                                                                  | ' APP '              |
| ' APPARECHHI '                                                                 | ' APP '              |
| ' APPAREILLAGES '                                                              | ' APP '              |
| ' APPAREILLAGE '                                                               | ' APP '              |
| ' APPAREILS '                                                                  | ' APP '              |
| ' APPAREIL '                                                                   | ' APP '              |
| ' APARATE '                                                                    | ' APAR '             |
| ' APPARATE '                                                                   | ' APP '              |
| ' APPLICATIONS '                                                               | ' APPL '             |
| ' APPLICATION '                                                                | ' APPL '             |
| ' APPLICAZIONE '                                                               | ' APPL '             |
| ' APPLICAZIONI '                                                               | ' APPL '             |
| ' ANPARTSSELSKABET '                                                           | ' APS '              |
| ' ANPARTSSELSKAB '                                                             | ' APS '              |
| ' A/S '                                                                        | ' AS '               |
| ' AKTIESELSKABET '                                                             | ' AS '               |
| ' AKTIESELSKAB '                                                               | ' AS '               |
| ' ASSOCIACAO '                                                                 | ' ASSOC '            |
| ' ASSOCIATED '                                                                 | ' ASSOC '            |
| ' ASSOCIATES '                                                                 | ' ASSOCIATES '       |
| ' ASSOCIATE '                                                                  | ' ASSOCIATES '       |
| ' ASSOCIATION '                                                                | ' ASSOC '            |
| ' BETEILIGUNGSGESELLSCHAFT MBH '                                               | ' BET GMBH '         |
| ' BETEILIGUNGS GESELLSCHAFT MIT '                                              | ' BET GMBH '         |
| ' BETEILIGUNGSGESELLSCHAFT '                                                   | ' BET GES '          |
| ' BESCHRANKTER HAFTUNG '                                                       | ' BET GMBH '         |
| ' BROEDERNA '                                                                  | ' BRDR '             |
| ' BROEDRENE '                                                                  | ' BRDR '             |
| ' BRODERNA '                                                                   | ' BRDR '             |
| ' BRODRENE '                                                                   | ' BRDR '             |
| ' BROTHERS '                                                                   | ' BROS '             |
| ' BESLOTEN VENNOOTSCHAP MET '                                                  | ' BV '               |
| ' BESLOTEN VENNOOTSCHAP '                                                      | ' BV '               |
| ' BEPERKTE AANSPRAKELIJKHEID '                                                 | ' BV '               |
| ' CLOSE CORPORATION '                                                          | ' CC '               |
| ' CENTER '                                                                     | ' CENT '             |
| ' CENTRAAL '                                                                   | ' CENT '             |
| ' CENTRALA '                                                                   | ' CENT '             |
| ' CENTRALES '                                                                  | ' CENT '             |
| ' CENTRALE '                                                                   | ' CENT '             |
| ' CENTRAL '                                                                    | ' CENT '             |
| ' CENTRAUX '                                                                   | ' CENT '             |
| ' CENTRE '                                                                     | ' CENT '             |
| ' CENTRO '                                                                     | ' CENT '             |
| ' CENTRUL '                                                                    | ' CENT '             |
| ' CENTRUM '                                                                    | ' CENT '             |
| ' CERCETARE '                                                                  | ' CERC '             |
| ' CERCETARI '                                                                  | ' CERC '             |
| ' CHEMICALS '                                                                  | ' CHEM '             |
| ' CHEMICAL '                                                                   | ' CHEM '             |
| ' CHEMICKEJ '                                                                  | ' CHEM '             |
| ' CHEMICKE '                                                                   | ' CHEM '             |
| ' CHEMICKYCH '                                                                 | ' CHEM '             |
| ' CHEMICKY '                                                                   | ' CHEM '             |
| ' CHEMICZNE '                                                                  | ' CHEM '             |
| ' CHEMICZNY '                                                                  | ' CHEM '             |
| ' CHEMIE '                                                                     | ' CHEM '             |
| ' CHEMII '                                                                     | ' CHEM '             |
| ' CHEMISCHE '                                                                  | ' CHEM '             |
| ' CHEMISCH '                                                                   | ' CHEM '             |
| ' CHEMISKEJ '                                                                  | ' CHEM '             |
| ' CHEMISTRY '                                                                  | ' CHEM '             |
| ' CHIMICA '                                                                    | ' CHIM '             |
| ' CHIMICE '                                                                    | ' CHIM '             |
| ' CHIMICI '                                                                    | ' CHIM '             |
| ' CHIMICO '                                                                    | ' CHIM '             |
| ' CHIMIC '                                                                     | ' CHIM '             |
| ' CHIMIEI '                                                                    | ' CHIM '             |
| ' CHIMIE '                                                                     | ' CHIM '             |
| ' CHIMIESKOJ '                                                                 | ' CHIM '             |
| ' CHIMII '                                                                     | ' CHIM '             |
| ' CHIMIKO '                                                                    | ' CHIM '             |
| ' CHIMIQUES '                                                                  | ' CHIM '             |
| ' CHIMIQUE '                                                                   | ' CHIM '             |
| ' CHIMIYAKH '                                                                  | ' CHIM '             |
| ' CHIMIYAMI '                                                                  | ' CHIM '             |
| ' CHIMIYAM '                                                                   | ' CHIM '             |
| ' CHIMIYA '                                                                    | ' CHIM '             |
| ' CHIMIYU '                                                                    | ' CHIM '             |
| ' COMPAGNIE FRANCAISE '                                                        | ' CIE FR '           |
| ' COMPAGNIE GENERALE '                                                         | ' CIE GEN '          |
| ' COMPAGNIE INDUSTRIALE '                                                      | ' CIE IND '          |
| ' COMPAGNIE INDUSTRIELLE '                                                     | ' CIE IND '          |
| ' COMPAGNIE INDUSTRIELLES '                                                    | ' CIE IND '          |
| ' COMPAGNIE INTERNATIONALE '                                                   | ' CIE INT '          |
| ' COMPAGNIE NATIONALE '                                                        | ' CIE NAT '          |
| ' COMPAGNIE PARISIENNE '                                                       | ' CIE PARIS '        |
| ' COMPAGNIE PARISIENN '                                                        | ' CIE PARIS '        |
| ' COMPAGNIE PARISIEN '                                                         | ' CIE PARIS '        |
| ' COMPANIES '                                                                  | ' CO '               |
| ' COMPAGNIA '                                                                  | ' CIA '              |
| ' COMPANHIA '                                                                  | ' CIA '              |
| ' COMPAGNIE '                                                                  | ' CIE '              |
| ' COMPANY '                                                                    | ' CO '               |
| ' COMBINATUL '                                                                 | ' COMB '             |
| ' COMMERCIALE '                                                                | ' COMML '            |
| ' COMMERCIAL '                                                                 | ' COMML '            |
| ' CONSOLIDATED '                                                               | ' CONSOL '           |
| ' CONSTRUCCIONES '                                                             | ' CONSTR '           |
| ' CONSTRUCCIONE '                                                              | ' CONSTR '           |
| ' CONSTRUCCION '                                                               | ' CONSTR '           |
| ' CONSTRUCTIE '                                                                | ' CONSTR '           |
| ' CONSTRUCTII '                                                                | ' CONSTR '           |
| ' CONSTRUCTIILOR '                                                             | ' CONSTR '           |
| ' CONSTRUCTIONS '                                                              | ' CONSTR '           |
| ' CONSTRUCTION '                                                               | ' CONSTR '           |
| ' CONSTRUCTORTUL '                                                             | ' CONSTR '           |
| ' CONSTRUCTORUL '                                                              | ' CONSTR '           |
| ' CONSTRUCTOR '                                                                | ' CONSTR '           |
| ' CO OPERATIVES '                                                              | ' COOP '             |
| ' CO OPERATIVE '                                                               | ' COOP '             |
| ' COOPERATIEVE '                                                               | ' COOP '             |
| ' COOPERATIVA '                                                                | ' COOP '             |
| ' COOPERATIVES '                                                               | ' COOP '             |
| ' COOPERATIVE '                                                                | ' COOP '             |
| ' INCORPORATED '                                                               | ' INC '              |
| ' INCORPORATION '                                                              | ' INC '              |
| ' CORPORATE '                                                                  | ' CORP '             |
| ' CORPORATION OF AMERICA '                                                     | ' CORP '             |
| ' CORPORATION '                                                                | ' CORP '             |
| ' CORPORASTION '                                                               | ' CORP '             |
| ' CORPORATIOON '                                                               | ' CORP '             |
| ' COSTRUZIONI '                                                                | ' COSTR '            |
| ' DEUTSCHEN '                                                                  | ' DDR '              |
| ' DEUTSCHE '                                                                   | ' DDR '              |
| ' DEMOKRATISCHEN REPUBLIK '                                                    | ' DDR '              |
| ' DEMOKRATISCHE REPUBLIK '                                                     | ' DDR '              |
| ' DEPARTEMENT '                                                                | ' DEPT '             |
| ' DEPARTMENT '                                                                 | ' DEPT '             |
| ' DEUTSCHES '                                                                  | ' DEUT '             |
| ' DEUTSCHEN '                                                                  | ' DEUT '             |
| ' DEUTSCHER '                                                                  | ' DEUT '             |
| ' DEUTSCHLAND '                                                                | ' DEUT '             |
| ' DEUTSCHE '                                                                   | ' DEUT '             |
| ' DEUTSCH '                                                                    | ' DEUT '             |
| ' DEVELOPMENTS '                                                               | ' DEV '              |
| ' DEVELOPMENT '                                                                | ' DEV '              |
| ' DEVELOPPEMENTS '                                                             | ' DEV '              |
| ' DEVELOPPEMENT '                                                              | ' DEV '              |
| ' DEVELOP '                                                                    | ' DEV '              |
| ' DIVISIONE '                                                                  | ' DIV '              |
| ' DIVISION '                                                                   | ' DIV '              |
| ' ENGINEERING '                                                                | ' ENG '              |
| ' EQUIPEMENTS '                                                                | ' EQUIP '            |
| ' EQUIPEMENT '                                                                 | ' EQUIP '            |
| ' EQUIPMENTS '                                                                 | ' EQUIP '            |
| ' EQUIPMENT '                                                                  | ' EQUIP '            |
| ' ESTABLISHMENTS '                                                             | ' ESTAB '            |
| ' ESTABLISHMENT '                                                              | ' ESTAB '            |
| ' ESTABLISSEMENTS '                                                            | ' ESTAB '            |
| ' ESTABLISSEMENT '                                                             | ' ESTAB '            |
| ' ETABLISSEMENTS '                                                             | ' ETAB '             |
| ' ETABLISSEMENT '                                                              | ' ETAB '             |
| ' ETABS '                                                                      | ' ETAB '             |
| ' ETS '                                                                        | ' ETAB '             |
| ' ETUDES '                                                                     | ' ETUD '             |
| ' ETUDE '                                                                      | ' ETUD '             |
| ' EUROPAEISCHEN '                                                              | ' EURO '             |
| ' EUROPAEISCHES '                                                              | ' EURO '             |
| ' EUROPAEISCHE '                                                               | ' EURO '             |
| ' EUROPAISCHEN '                                                               | ' EURO '             |
| ' EUROPAISCHES '                                                               | ' EURO '             |
| ' EUROPAISCHE '                                                                | ' EURO '             |
| ' EUROPEAN '                                                                   | ' EURO '             |
| ' EUROPEENNE '                                                                 | ' EURO '             |
| ' EUROPEEN '                                                                   | ' EURO '             |
| ' EUROPEA '                                                                    | ' EURO '             |
| ' EUROPE '                                                                     | ' EURO '             |
| ' EINGETRAGENER VEREIN '                                                       | ' EV '               |
| ' EXPLOATERINGS '                                                              | ' EXPL '             |
| ' EXPLOATERING '                                                               | ' EXPL '             |
| ' EXPLOITATIE '                                                                | ' EXPL '             |
| ' EXPLOITATIONS '                                                              | ' EXPL '             |
| ' EXPLOITATION '                                                               | ' EXPL '             |
| ' FIRMA '                                                                      | ' FA '               |
| ' FABBRICAZIONI '                                                              | ' FAB '              |
| ' FABBRICHE '                                                                  | ' FAB '              |
| ' FABRICATIONS '                                                               | ' FAB '              |
| ' FABRICATION '                                                                | ' FAB '              |
| ' FABBRICA '                                                                   | ' FAB '              |
| ' FABRICA '                                                                    | ' FAB '              |
| ' FABRIEKEN '                                                                  | ' FAB '              |
| ' FABRIEK '                                                                    | ' FAB '              |
| ' FABRIKER '                                                                   | ' FAB '              |
| ' FABRIK '                                                                     | ' FAB '              |
| ' FABRIQUES '                                                                  | ' FAB '              |
| ' FABRIQUE '                                                                   | ' FAB '              |
| ' FABRIZIO '                                                                   | ' FAB '              |
| ' FABRYKA '                                                                    | ' FAB '              |
| ' FARMACEUTICA '                                                               | ' FARM '             |
| ' FARMACEUTICE '                                                               | ' FARM '             |
| ' FARMACEUTICHE '                                                              | ' FARM '             |
| ' FARMACEUTICI '                                                               | ' FARM '             |
| ' FARMACEUTICOS '                                                              | ' FARM '             |
| ' FARMACEUTICO '                                                               | ' FARM '             |
| ' FARMACEUTISK '                                                               | ' FARM '             |
| ' FARMACEVTSKIH '                                                              | ' FARM '             |
| ' FARMACIE '                                                                   | ' FARM '             |
| ' FONDATION '                                                                  | ' FOND '             |
| ' FONDAZIONE '                                                                 | ' FOND '             |
| ' FOUNDATIONS '                                                                | ' FOUND '            |
| ' FOUNDATION '                                                                 | ' FOUND '            |
| ' FRANCAISE '                                                                  | ' FR '               |
| ' FRANCAIS '                                                                   | ' FR '               |
| ' F LLI '                                                                      | ' FRAT '             |
| ' FLLI '                                                                       | ' FRAT '             |
| ' FRATELLI '                                                                   | ' FRAT '             |
| ' GEBRODERS '                                                                  | ' GEBR '             |
| ' GEBRODER '                                                                   | ' GEBR '             |
| ' GEBROEDERS '                                                                 | ' GEBR '             |
| ' GEBROEDER '                                                                  | ' GEBR '             |
| ' GEBRUDERS '                                                                  | ' GEBR '             |
| ' GEBRUDER '                                                                   | ' GEBR '             |
| ' GEBRUEDERS '                                                                 | ' GEBR '             |
| ' GEBRUEDER '                                                                  | ' GEBR '             |
| ' GEB '                                                                        | ' GEBR '             |
| ' GENERALA '                                                                   | ' GEN '              |
| ' GENERALES '                                                                  | ' GEN '              |
| ' GENERALE '                                                                   | ' GEN '              |
| ' GENERAL '                                                                    | ' GEN '              |
| ' GENERAUX '                                                                   | ' GEN '              |
| ' GESELLSCHAFT '                                                               | ' GES '              |
| ' GEWERKSCHAFT '                                                               | ' GEW '              |
| ' GAKKO HOJIN '                                                                | ' GH '               |
| ' GAKKO HOUJIN '                                                               | ' GH '               |
| ' GUTEHOFFNUNGSCHUETTE '                                                       | ' GHH '              |
| ' GUTEHOFFNUNGSCHUTTE '                                                        | ' GHH '              |
| ' GOMEI GAISHA '                                                               | ' GK '               |
| ' GOMEI KAISHA '                                                               | ' GK '               |
| ' GOSHI KAISHA '                                                               | ' GK '               |
| ' GOUSHI GAISHA '                                                              | ' GK '               |
| ' GESELLSCHAFT MBH '                                                           | ' GMBH '             |
| ' GESELLSCHAFT MIT BESCHRANKTER HAFTUNG '                                      | ' GMBH '             |
| ' GROUPEMENT '                                                                 | ' GRP '              |
| ' GROUPMENT '                                                                  | ' GRP '              |
| ' HANDELSMAATSCHAPPIJ '                                                        | ' HANDL '            |
| ' HANDELSMIJ '                                                                 | ' HANDL '            |
| ' HANDELS BOLAGET '                                                            | ' HB '               |
| ' HANDELSBOLAGET '                                                             | ' HB '               |
| ' HER MAJESTY THE QUEEN IN RIGHT OF CANADA AS REPRESENTED BY THE MINISTER OF ' | ' CANADA MIN OF '    |
| ' HER MAJESTY THE QUEEN '                                                      | ' UK '               |
| ' INDUSTRIAS '                                                                 | ' IND '              |
| ' INDUSTRIALS '                                                                | ' IND '              |
| ' INDUSTRIAL '                                                                 | ' IND '              |
| ' INDUSTRIALA '                                                                | ' IND '              |
| ' INDUSTRIALE '                                                                | ' IND '              |
| ' INDUSTRIALIZARE '                                                            | ' IND '              |
| ' INDUSTRIALIZAREA '                                                           | ' IND '              |
| ' INDUSTRIALI '                                                                | ' IND '              |
| ' INDUSTRIEELE '                                                               | ' IND '              |
| ' INDUSTRIEI '                                                                 | ' IND '              |
| ' INDUSTRIELS '                                                                | ' IND '              |
| ' INDUSTRIELLES '                                                              | ' IND '              |
| ' INDUSTRIELLE '                                                               | ' IND '              |
| ' INDUSTRIELL '                                                                | ' IND '              |
| ' INDUSTRIEL '                                                                 | ' IND '              |
| ' INDUSTRIER '                                                                 | ' IND '              |
| ' INDUSTRIES '                                                                 | ' IND '              |
| ' INDUSTRII '                                                                  | ' IND '              |
| ' INDUSTRIJ '                                                                  | ' IND '              |
| ' INDUSTRIYAKH '                                                               | ' IND '              |
| ' INDUSTRIYAM '                                                                | ' IND '              |
| ' INDUSTRIYAMI '                                                               | ' IND '              |
| ' INDUSTRIYA '                                                                 | ' IND '              |
| ' INDUSTRIYU '                                                                 | ' IND '              |
| ' INDUSTRIA '                                                                  | ' IND '              |
| ' INDUSTRIE '                                                                  | ' IND '              |
| ' INDUSTRI '                                                                   | ' IND '              |
| ' INDUSTRY '                                                                   | ' IND '              |
| ' INGENIERIA '                                                                 | ' ING '              |
| ' INGENIER '                                                                   | ' ING '              |
| ' INGENIEURS '                                                                 | ' ING '              |
| ' INGENIEURBUERO '                                                             | ' ING '              |
| ' INGENIEURBUREAU '                                                            | ' ING '              |
| ' INGENIEURBURO '                                                              | ' ING '              |
| ' INGENIEURGESELLSCHAFT '                                                      | ' ING '              |
| ' INGENIEURSBUREAU '                                                           | ' ING '              |
| ' INGENIEURTECHNISCHES '                                                       | ' ING '              |
| ' INGENIEURTECHNISCHE '                                                        | ' ING '              |
| ' INGENIEUR '                                                                  | ' ING '              |
| ' INGENIOERFIRMAET '                                                           | ' ING '              |
| ' INGENIORSFIRMAN '                                                            | ' ING '              |
| ' INGENIORSFIRMA '                                                             | ' ING '              |
| ' INGENJORSFIRMA '                                                             | ' ING '              |
| ' INGINERIE '                                                                  | ' ING '              |
| ' INSTITUTE FRANCAISE '                                                        | ' INST FR '          |
| ' INSTITUT FRANCAIS '                                                          | ' INST FR '          |
| ' INSTITUTE NATIONALE '                                                        | ' INST NAT '         |
| ' INSTITUT NATIONAL '                                                          | ' INST NAT '         |
| ' INSTITUTAMI '                                                                | ' INST '             |
| ' INSTITUTAMKH '                                                               | ' INST '             |
| ' INSTITUTAM '                                                                 | ' INST '             |
| ' INSTITUTA '                                                                  | ' INST '             |
| ' INSTITUTES '                                                                 | ' INST '             |
| ' INSTITUTET '                                                                 | ' INST '             |
| ' INSTITUTE '                                                                  | ' INST '             |
| ' INSTITUTOM '                                                                 | ' INST '             |
| ' INSTITUTOV '                                                                 | ' INST '             |
| ' INSTITUTO '                                                                  | ' INST '             |
| ' INSTITUTT '                                                                  | ' INST '             |
| ' INSTITUTUL '                                                                 | ' INST '             |
| ' INSTITUTU '                                                                  | ' INST '             |
| ' INSTITUTY '                                                                  | ' INST '             |
| ' INSTITUT '                                                                   | ' INST '             |
| ' INSTITUUT '                                                                  | ' INST '             |
| ' INSTITZHT '                                                                  | ' INST '             |
| ' INSTYTUT '                                                                   | ' INST '             |
| ' INSINOORITOMISTO '                                                           | ' INSTMSTO '         |
| ' INSTRUMENTS '                                                                | ' INSTR '            |
| ' INSTRUMENTATION '                                                            | ' INSTR '            |
| ' INSTRUMENTE '                                                                | ' INSTR '            |
| ' INSTRUMENT '                                                                 | ' INSTR '            |
| ' INTERNATL '                                                                  | ' INT '              |
| ' INTERNACIONAL '                                                              | ' INT '              |
| ' INTERNATIONAL '                                                              | ' INT '              |
| ' INTERNATIONALEN '                                                            | ' INT '              |
| ' INTERNATIONALE '                                                             | ' INT '              |
| ' INTERNATIONAUX '                                                             | ' INT '              |
| ' INTERNATIONELLA '                                                            | ' INT '              |
| ' INTERNAZIONALE '                                                             | ' INT '              |
| ' INTL '                                                                       | ' INT '              |
| ' INTREPRINDEREA '                                                             | ' INTR '             |
| ' ISTITUTO '                                                                   | ' IST '              |
| ' ITALIANA '                                                                   | ' ITAL '             |
| ' ITALIANE '                                                                   | ' ITAL '             |
| ' ITALIANI '                                                                   | ' ITAL '             |
| ' ITALIANO '                                                                   | ' ITAL '             |
| ' ITALIENNE '                                                                  | ' ITAL '             |
| ' ITALIEN '                                                                    | ' ITAL '             |
| ' ITALIAN '                                                                    | ' ITAL '             |
| ' ITALIA '                                                                     | ' ITAL '             |
| ' ITALI '                                                                      | ' ITAL '             |
| ' ITALO '                                                                      | ' ITAL '             |
| ' ITALY '                                                                      | ' ITAL '             |
| ' JUNIOR '                                                                     | ' JR '               |
| ' KOMMANDIT BOLAG '                                                            | ' KB '               |
| ' KOMMANDIT BOLAGET '                                                          | ' KB '               |
| ' KOMMANDITBOLAGET '                                                           | ' KB '               |
| ' KOMMANDITBOLAG '                                                             | ' KB '               |
| ' KOMMANDIT GESELLSCHAFT '                                                     | ' KG '               |
| ' KOMMANDITGESELLSCHAFT '                                                      | ' KG '               |
| ' KOMMANDIT GESELLSCHAFT AUF AKTIEN '                                          | ' KGAA '             |
| ' KOMMANDITGESELLSCHAFT AUF AKTIEN '                                           | ' KGAA '             |
| ' KUTATO INTEZETE '                                                            | ' KI '               |
| ' KUTATO INTEZET '                                                             | ' KI '               |
| ' KUTATOINTEZETE '                                                             | ' KI '               |
| ' KUTATOINTEZET '                                                              | ' KI '               |
| ' KABUSHIKI GAISHA '                                                           | ' KK '               |
| ' KABUSHIKI KAISHA '                                                           | ' KK '               |
| ' KABUSHIKI GAISYA '                                                           | ' KK '               |
| ' KABUSHIKI KAISYA '                                                           | ' KK '               |
| ' KABUSHIKIGAISHA '                                                            | ' KK '               |
| ' KABUSHIKIKAISHA '                                                            | ' KK '               |
| ' KABUSHIKIGAISYA '                                                            | ' KK '               |
| ' KABUSHIKIKAISYA '                                                            | ' KK '               |
| ' KOMBINATU '                                                                  | ' KOMB '             |
| ' KOMBINATY '                                                                  | ' KOMB '             |
| ' KOMBINAT '                                                                   | ' KOMB '             |
| ' KONINKLIJKE '                                                                | ' KONINK '           |
| ' KONCERNOVY PODNIK '                                                          | ' KP '               |
| ' KUNSTSTOFFTECHNIK '                                                          | ' KUNST '            |
| ' KUNSTSTOFF '                                                                 | ' KUNST '            |
| ' LABORATOIRES '                                                               | ' LAB '              |
| ' LABORATOIRE '                                                                | ' LAB '              |
| ' LABORATOIR '                                                                 | ' LAB '              |
| ' LABORATORIEI '                                                               | ' LAB '              |
| ' LABORATORIES '                                                               | ' LAB '              |
| ' LABORATORII '                                                                | ' LAB '              |
| ' LABORATORIJ '                                                                | ' LAB '              |
| ' LABORATORIOS '                                                               | ' LAB '              |
| ' LABORATORIO '                                                                | ' LAB '              |
| ' LABORATORIUM '                                                               | ' LAB '              |
| ' LABORATORI '                                                                 | ' LAB '              |
| ' LABORATORY '                                                                 | ' LAB '              |
| ' LABORTORI '                                                                  | ' LAB '              |
| ' LAVORAZA '                                                                   | ' LAVORAZ '          |
| ' LAVORAZIONE '                                                                | ' LAVORAZ '          |
| ' LAVORAZIONI '                                                                | ' LAVORAZ '          |
| ' LAVORAZIO '                                                                  | ' LAVORAZ '          |
| ' LAVORAZI '                                                                   | ' LAVORAZ '          |
| ' LIMITED PARTNERSHIP '                                                        | ' LP '               |
| ' LIMITED '                                                                    | ' LTD '              |
| ' LTD LTEE '                                                                   | ' LTD '              |
| ' MASCHINENVERTRIEB '                                                          | ' MASCH '            |
| ' MASCHINENBAUANSTALT '                                                        | ' MASCHBAU '         |
| ' MASCHINENBAU '                                                               | ' MASCHBAU '         |
| ' MASCHINENFABRIEK '                                                           | ' MASCHFAB '         |
| ' MASCHINENFABRIKEN '                                                          | ' MASCHFAB '         |
| ' MASCHINENFABRIK '                                                            | ' MASCHFAB '         |
| ' MASCHINENFAB '                                                               | ' MASCHFAB '         |
| ' MASCHINEN '                                                                  | ' MASCH '            |
| ' MASCHIN '                                                                    | ' MASCH '            |
| ' MIT BESCHRANKTER HAFTUNG '                                                   | ' MBH '              |
| ' MANUFACTURINGS '                                                             | ' MFG '              |
| ' MANUFACTURING '                                                              | ' MFG '              |
| ' MANIFATTURAS '                                                               | ' MFR '              |
| ' MANIFATTURA '                                                                | ' MFR '              |
| ' MANIFATTURE '                                                                | ' MFR '              |
| ' MANUFACTURAS '                                                               | ' MFR '              |
| ' MANUFACTURERS '                                                              | ' MFR '              |
| ' MANUFACTURER '                                                               | ' MFR '              |
| ' MANUFACTURES '                                                               | ' MFR '              |
| ' MANUFACTURE '                                                                | ' MFR '              |
| ' MANUFATURA '                                                                 | ' MFR '              |
| ' MAATSCHAPPIJ '                                                               | ' MIJ '              |
| ' MEDICAL '                                                                    | ' MED '              |
| ' MINISTERE '                                                                  | ' MIN '              |
| ' MINISTERIUM '                                                                | ' MIN '              |
| ' MINISTERO '                                                                  | ' MIN '              |
| ' MINISTERSTVAKH '                                                             | ' MIN '              |
| ' MINISTERSTVAM '                                                              | ' MIN '              |
| ' MINISTERSTVAMI '                                                             | ' MIN '              |
| ' MINISTERSTVA '                                                               | ' MIN '              |
| ' MINISTERSTVE '                                                               | ' MIN '              |
| ' MINISTERSTVO '                                                               | ' MIN '              |
| ' MINISTERSTVOM '                                                              | ' MIN '              |
| ' MINISTERSTVU '                                                               | ' MIN '              |
| ' MINISTERSTV '                                                                | ' MIN '              |
| ' MINISTERSTWO '                                                               | ' MIN '              |
| ' MINISTERUL '                                                                 | ' MIN '              |
| ' MINISTRE '                                                                   | ' MIN '              |
| ' MINISTRY '                                                                   | ' MIN '              |
| ' MINISTER '                                                                   | ' MIN '              |
| ' MAGYAR TUDOMANYOS AKADEMIA '                                                 | ' MTA '              |
| ' NATIONAAL '                                                                  | ' NAT '              |
| ' NATIONAL '                                                                   | ' NAT '              |
| ' NATIONALE '                                                                  | ' NAT '              |
| ' NATIONAUX '                                                                  | ' NAT '              |
| ' NATL '                                                                       | ' NAT '              |
| ' NAZIONALE '                                                                  | ' NAZ '              |
| ' NAZIONALI '                                                                  | ' NAZ '              |
| ' NORDDEUTSCH '                                                                | ' NORDDEUT '         |
| ' NORDDEUTSCHE '                                                               | ' NORDDEUT '         |
| ' NORDDEUTSCHER '                                                              | ' NORDDEUT '         |
| ' NORDDEUTSCHES '                                                              | ' NORDDEUT '         |
| ' NARODNI PODNIK '                                                             | ' NP '               |
| ' NARODNIJ PODNIK '                                                            | ' NP '               |
| ' NARODNY PODNIK '                                                             | ' NP '               |
| ' NAAMLOOSE VENOOTSCHAP '                                                      | ' NV '               |
| ' NAAMLOZE VENNOOTSCHAP '                                                      | ' NV '               |
| ' N V '                                                                        | ' NV '               |
| ' OESTERREICHISCHES '                                                          | ' OESTERR '          |
| ' OESTERREICHISCHE '                                                           | ' OESTERR '          |
| ' OESTERREICHISCH '                                                            | ' OESTERR '          |
| ' OESTERREICH '                                                                | ' OESTERR '          |
| ' OSTERREICHISCHES '                                                           | ' OESTERR '          |
| ' OSTERREICHISCHE '                                                            | ' OESTERR '          |
| ' OSTERREICHISCH '                                                             | ' OESTERR '          |
| ' OSTERREICH '                                                                 | ' OESTERR '          |
| ' OFFICINE MECCANICA '                                                         | ' OFF MEC '          |
| ' OFFICINE MECCANICHE '                                                        | ' OFF MEC '          |
| ' OFFICINE NATIONALE '                                                         | ' OFF NAT '          |
| ' OFFENE HANDELSGESELLSCHAFT '                                                 | ' OHG '              |
| ' ONTWIKKELINGSBUREAU '                                                        | ' ONTWIK '           |
| ' ONTWIKKELINGS '                                                              | ' ONTWIK '           |
| ' OBOROVY PODNIK '                                                             | ' OP '               |
| ' ORGANISATIE '                                                                | ' ORG '              |
| ' ORGANISATIONS '                                                              | ' ORG '              |
| ' ORGANISATION '                                                               | ' ORG '              |
| ' ORGANIZATIONS '                                                              | ' ORG '              |
| ' ORGANIZATION '                                                               | ' ORG '              |
| ' ORGANIZZAZIONE '                                                             | ' ORG '              |
| ' OSAKEYHTIO '                                                                 | ' OY '               |
| ' PHARMACEUTICALS '                                                            | ' PHARM '            |
| ' PHARMACEUTICAL '                                                             | ' PHARM '            |
| ' PHARMACEUTICA '                                                              | ' PHARM '            |
| ' PHARMACEUTIQUES '                                                            | ' PHARM '            |
| ' PHARMACEUTIQUE '                                                             | ' PHARM '            |
| ' PHARMAZEUTIKA '                                                              | ' PHARM '            |
| ' PHARMAZEUTISCHEN '                                                           | ' PHARM '            |
| ' PHARMAZEUTISCHE '                                                            | ' PHARM '            |
| ' PHARMAZEUTISCH '                                                             | ' PHARM '            |
| ' PHARMAZIE '                                                                  | ' PHARM '            |
| ' PUBLIC LIMITED COMPANY '                                                     | ' PLC '              |
| ' PRELUCRAREA '                                                                | ' PRELUC '           |
| ' PRELUCRARE '                                                                 | ' PRELUC '           |
| ' PRODOTTI '                                                                   | ' PROD '             |
| ' PRODUCE '                                                                    | ' PROD '             |
| ' PRODUCTS '                                                                   | ' PROD '             |
| ' PRODUCT '                                                                    | ' PROD '             |
| ' PRODUCTAS '                                                                  | ' PROD '             |
| ' PRODUCTA '                                                                   | ' PROD '             |
| ' PRODUCTIE '                                                                  | ' PROD '             |
| ' PRODUCTOS '                                                                  | ' PROD '             |
| ' PRODUCTO '                                                                   | ' PROD '             |
| ' PRODUCTORES '                                                                | ' PROD '             |
| ' PRODUITS '                                                                   | ' PROD '             |
| ' PRODUIT '                                                                    | ' PROD '             |
| ' PRODUKCJI '                                                                  | ' PROD '             |
| ' PRODUKTER '                                                                  | ' PROD '             |
| ' PRODUKTE '                                                                   | ' PROD '             |
| ' PRODUKT '                                                                    | ' PROD '             |
| ' PRODUSE '                                                                    | ' PROD '             |
| ' PRODUTOS '                                                                   | ' PROD '             |
| ' PRODUIT CHIMIQUES '                                                          | ' PROD CHIM '        |
| ' PRODUIT CHIMIQUE '                                                           | ' PROD CHIM '        |
| ' PRODUCTIONS '                                                                | ' PRODN '            |
| ' PRODUCTION '                                                                 | ' PRODN '            |
| ' PRODUKTIONS '                                                                | ' PRODN '            |
| ' PRODUKTION '                                                                 | ' PRODN '            |
| ' PRODUZIONI '                                                                 | ' PRODN '            |
| ' PROIECTARE '                                                                 | ' PROI '             |
| ' PROIECTARI '                                                                 | ' PROI '             |
| ' PRZEDSIEBIOSTWO '                                                            | ' PRZEDSIEB '        |
| ' PRZEMYSLU '                                                                  | ' PRZEYM '           |
| ' PROPRIETARY '                                                                | ' PTY '              |
| ' PERSONENVENNOOTSCHAP MET '                                                   | ' PVBA '             |
| ' BEPERKTE AANSPRAKELIJKHEID '                                                 | ' PVBA '             |
| ' REALISATIONS '                                                               | ' REAL '             |
| ' REALISATION '                                                                | ' REAL '             |
| ' RECHERCHES '                                                                 | ' RECH '             |
| ' RECHERCHE '                                                                  | ' RECH '             |
| ' RECHERCHES ET DEVELOPMENTS '                                                 | ' RECH & DEV '       |
| ' RECHERCHE ET DEVELOPMENT '                                                   | ' RECH & DEV '       |
| ' RECHERCHES ET DEVELOPPEMENTS '                                               | ' RECH & DEV '       |
| ' RECHERCHE ET DEVELOPPEMENT '                                                 | ' RECH & DEV '       |
| ' RESEARCH & DEVELOPMENT '                                                     | ' RES & DEV '        |
| ' RESEARCH AND DEVELOPMENT '                                                   | ' RES & DEV '        |
| ' RESEARCH '                                                                   | ' RES '              |
| ' RIJKSUNIVERSITEIT '                                                          | ' RIJKSUNIV '        |
| ' SECRETATY '                                                                  | ' SECRETARY '        |
| ' SECRETRY '                                                                   | ' SECRETARY '        |
| ' SECREATRY '                                                                  | ' SECRETARY '        |
| ' SOCIEDAD ANONIMA '                                                           | ' SA '               |
| ' SOCIETE ANONYME DITE '                                                       | ' SA '               |
| ' SOCIETE ANONYME '                                                            | ' SA '               |
| ' SOCIETE A RESPONSABILITE LIMITEE '                                           | ' SARL '             |
| ' SOCIETE A RESPONSIBILITE LIMITEE '                                           | ' SARL '             |
| ' SOCIETA IN ACCOMANDITA SEMPLICE '                                            | ' SAS '              |
| ' SCHWEIZERISCHES '                                                            | ' SCHWEIZ '          |
| ' SCHWEIZERISCHER '                                                            | ' SCHWEIZ '          |
| ' SCHWEIZERISCHE '                                                             | ' SCHWEIZ '          |
| ' SCHWEIZERISCH '                                                              | ' SCHWEIZ '          |
| ' SCHWEIZER '                                                                  | ' SCHWEIZ '          |
| ' SCIENCES '                                                                   | ' SCI '              |
| ' SCIENCE '                                                                    | ' SCI '              |
| ' SCIENTIFICA '                                                                | ' SCI '              |
| ' SCIENTIFIC '                                                                 | ' SCI '              |
| ' SCIENTIFIQUES '                                                              | ' SCI '              |
| ' SCIENTIFIQUE '                                                               | ' SCI '              |
| ' SHADAN HOJIN '                                                               | ' SH '               |
| ' SIDERURGICAS '                                                               | ' SIDER '            |
| ' SIDERURGICA '                                                                | ' SIDER '            |
| ' SIDERURGIC '                                                                 | ' SIDER '            |
| ' SIDERURGIE '                                                                 | ' SIDER '            |
| ' SIDERURGIQUE '                                                               | ' SIDER '            |
| ' SOCIETA IN NOME COLLECTIVO '                                                 | ' SNC '              |
| ' SOCIETE EN NOM COLLECTIF '                                                   | ' SNC '              |
| ' SOCIETE ALSACIENNE '                                                         | ' SOC ALSAC '        |
| ' SOCIETE APPLICATION '                                                        | ' SOC APPL '         |
| ' SOCIETA APPLICAZIONE '                                                       | ' SOC APPL '         |
| ' SOCIETE AUXILIAIRE '                                                         | ' SOC AUX '          |
| ' SOCIETE CHIMIQUE '                                                           | ' SOC CHIM '         |
| ' SOCIEDAD CIVIL '                                                             | ' SOC CIV '          |
| ' SOCIETE CIVILE '                                                             | ' SOC CIV '          |
| ' SOCIETE COMMERCIALES '                                                       | ' SOC COMML '        |
| ' SOCIETE COMMERCIALE '                                                        | ' SOC COMML '        |
| ' SOCIEDAD ESPANOLA '                                                          | ' SOC ESPAN '        |
| ' SOCIETE ETUDES '                                                             | ' SOC ETUD '         |
| ' SOCIETE ETUDE '                                                              | ' SOC ETUD '         |
| ' SOCIETE EXPLOITATION '                                                       | ' SOC EXPL '         |
| ' SOCIETE GENERALE '                                                           | ' SOC GEN '          |
| ' SOCIETE INDUSTRIELLES '                                                      | ' SOC IND '          |
| ' SOCIETE INDUSTRIELLE '                                                       | ' SOC IND '          |
| ' SOCIETE MECANIQUES '                                                         | ' SOC MEC '          |
| ' SOCIETE MECANIQUE '                                                          | ' SOC MEC '          |
| ' SOCIETE NATIONALE '                                                          | ' SOC NAT '          |
| ' SOCIETE NOUVELLE '                                                           | ' SOC NOUV '         |
| ' SOCIETE PARISIENNE '                                                         | ' SOC PARIS '        |
| ' SOCIETE PARISIENN '                                                          | ' SOC PARIS '        |
| ' SOCIETE PARISIEN '                                                           | ' SOC PARIS '        |
| ' SOCIETE TECHNIQUES '                                                         | ' SOC TECH '         |
| ' SOCIETE TECHNIQUE '                                                          | ' SOC TECH '         |
| ' SDRUZENI PODNIKU '                                                           | ' SP '               |
| ' SDRUZENI PODNIK '                                                            | ' SP '               |
| ' SOCIETA PER AZIONI '                                                         | ' SPA '              |
| ' SPITALUL '                                                                   | ' SPITAL '           |
| ' SOCIETE PRIVEE A RESPONSABILITE LIMITEE '                                    | ' SPRL '             |
| ' SOCIEDAD DE RESPONSABILIDAD LIMITADA '                                       | ' SRL '              |
| ' STIINTIFICA '                                                                | ' STIINT '           |
| ' SUDDEUTSCHES '                                                               | ' SUDDEUT '          |
| ' SUDDEUTSCHER '                                                               | ' SUDDEUT '          |
| ' SUDDEUTSCHE '                                                                | ' SUDDEUT '          |
| ' SUDDEUTSCH '                                                                 | ' SUDDEUT '          |
| ' SOCIEDADE '                                                                  | ' SOC '              |
| ' SOCIEDAD '                                                                   | ' SOC '              |
| ' SOCIETA '                                                                    | ' SOC '              |
| ' SOCIETE '                                                                    | ' SOC '              |
| ' SOCIETY '                                                                    | ' SOC '              |
| ' SA DITE '                                                                    | ' SA '               |
| ' TECHNICAL '                                                                  | ' TECH '             |
| ' TECHNICO '                                                                   | ' TECH '             |
| ' TECHNICZNY '                                                                 | ' TECH '             |
| ' TECHNIKAI '                                                                  | ' TECH '             |
| ' TECHNIKI '                                                                   | ' TECH '             |
| ' TECHNIK '                                                                    | ' TECH '             |
| ' TECHNIQUES '                                                                 | ' TECH '             |
| ' TECHNIQUE '                                                                  | ' TECH '             |
| ' TECHNISCHES '                                                                | ' TECH '             |
| ' TECHNISCHE '                                                                 | ' TECH '             |
| ' TECHNISCH '                                                                  | ' TECH '             |
| ' TECHNOLOGY '                                                                 | ' TECH '             |
| ' TECHNOLOGIES '                                                               | ' TECH '             |
| ' TELECOMMUNICATIONS '                                                         | ' TELECOM '          |
| ' TELECOMMUNICACION '                                                          | ' TELECOM '          |
| ' TELECOMMUNICATION '                                                          | ' TELECOM '          |
| ' TELECOMMUNICAZIONI '                                                         | ' TELECOM '          |
| ' TELECOMUNICAZIONI '                                                          | ' TELECOM '          |
| ' TRUSTUL '                                                                    | ' TRUST '            |
| ' UNITED KINGDOM '                                                             | ' UK '               |
| ' SECRETARY OF STATE FOR '                                                     | ' UK SEC FOR '       |
| ' UNIVERSIDADE '                                                               | ' UNIV '             |
| ' UNIVERSIDAD '                                                                | ' UNIV '             |
| ' UNIVERSITA DEGLI STUDI '                                                     | ' UNIV '             |
| ' UNIVERSITAET '                                                               | ' UNIV '             |
| ' UNIVERSITAIRE '                                                              | ' UNIV '             |
| ' UNIVERSITAIR '                                                               | ' UNIV '             |
| ' UNIVERSITATEA '                                                              | ' UNIV '             |
| ' UNIVERSITEIT '                                                               | ' UNIV '             |
| ' UNIVERSITETAMI '                                                             | ' UNIV '             |
| ' UNIVERSITETAM '                                                              | ' UNIV '             |
| ' UNIVERSITETE '                                                               | ' UNIV '             |
| ' UNIVERSITETOM '                                                              | ' UNIV '             |
| ' UNIVERSITETOV '                                                              | ' UNIV '             |
| ' UNIVERSITETU '                                                               | ' UNIV '             |
| ' UNIVERSITETY '                                                               | ' UNIV '             |
| ' UNIVERSITETA '                                                               | ' UNIV '             |
| ' UNIVERSITAT '                                                                | ' UNIV '             |
| ' UNIVERSITET '                                                                | ' UNIV '             |
| ' UNIVERSITE '                                                                 | ' UNIV '             |
| ' UNIVERSITY '                                                                 | ' UNIV '             |
| ' UNIVERSITA '                                                                 | ' UNIV '             |
| ' UNIWERSYTET '                                                                | ' UNIV '             |
| ' UNITED STATES OF AMERICA ADMINISTRATOR '                                     | ' US ADMIN '         |
| ' UNITED STATES OF AMERICA AS REPRESENTED BY THE ADMINISTRATOR '               | ' US ADMIN '         |
| ' UNITED STATES OF AMERICA AS REPRESENTED BY THE DEPT '                        | ' US DEPT '          |
| ' UNITED STATES OF AMERICA AS REPRESENTED BY THE UNITED STATES DEPT '          | ' US DEPT '          |
| ' UNITED STATES OF AMERICAN AS REPRESENTED BY THE UNITED STATES DEPT '         | ' US DEPT '          |
| ' UNITED STATES GOVERNMENT AS REPRESENTED BY THE SECRETARY OF '                | ' US SEC '           |
| ' UNITED STATES OF AMERICA REPRESENTED BY THE SECRETARY '                      | ' US SEC '           |
| ' UNITED STATES OF AMERICA AS REPRESENTED BY THE SECRETARY '                   | ' US SEC '           |
| ' UNITED STATES OF AMERICAS AS REPRESENTED BY THE SECRETARY '                  | ' US SEC '           |
| ' UNITES STATES OF AMERICA AS REPRESENTED BY THE SECRETARY '                   | ' US SEC '           |
| ' UNITED STATES OF AMERICA SECRETARY OF '                                      | ' US SEC '           |
| ' UNITED STATES OF AMERICA '                                                   | ' USA '              |
| ' UNITED STATES '                                                              | ' USA '              |
| ' UTILAJE '                                                                    | ' UTIL '             |
| ' UTILAJ '                                                                     | ' UTIL '             |
| ' UTILISATIONS VOLKSEIGENER BETRIEBE '                                         | ' VEB '              |
| ' UTILISATION VOLKSEIGENER BETRIEBE '                                          | ' VEB '              |
| ' VEB KOMBINAT '                                                               | ' VEB KOMB '         |
| ' VEREENIGDE '                                                                 | ' VER '              |
| ' VEREINIGTES VEREINIGUNG '                                                    | ' VER '              |
| ' VEREINIGTE VEREINIGUNG '                                                     | ' VER '              |
| ' VEREIN '                                                                     | ' VER '              |
| ' VERENIGING '                                                                 | ' VER '              |
| ' VERWALTUNGEN '                                                               | ' VERW '             |
| ' VERWALTUNGS '                                                                | ' VERW '             |
| ' VERWERTUNGS '                                                                | ' VERW '             |
| ' VERWALTUNGSGESELLSCHAFT '                                                    | ' VERW GES '         |
| ' VYZK USTAV '                                                                 | ' VU '               |
| ' VYZKUMNY USTAV '                                                             | ' VU '               |
| ' VYZKUMNYUSTAV '                                                              | ' VU '               |
| ' VEREINIGUNG VOLKSEIGENER BETRIEBUNG '                                        | ' VVB '              |
| ' VYZK VYVOJOVY USTAV '                                                        | ' VVU '              |
| ' VYZKUMNY VYVOJOVY USTAV '                                                    | ' VVU '              |
| ' WERKZEUGMASCHINENKOMBINAT '                                                  | ' WERKZ MASCH KOMB ' |
| ' WERKZEUGMASCHINENFABRIK '                                                    | ' WERKZ MASCHFAB '   |
| ' WESTDEUTSCHES '                                                              | ' WESTDEUT '         |
| ' WESTDEUTSCHER '                                                              | ' WESTDEUT '         |
| ' WESTDEUTSCHE '                                                               | ' WESTDEUT '         |
| ' WESTDEUTSCH '                                                                | ' WESTDEUT '         |
| ' WISSENSCHAFTLICHE(S) '                                                       | ' WISS '             |
| ' WISSENSCHAFTLICHES TECHNISCHES ZENTRUM '                                     | ' WTZ '              |
| ' YUGEN KAISHA '                                                               | ' YG YUGEN GAISHA '  |
| ' YUUGEN GAISHA '                                                              | ' YG YUGEN GAISHA '  |
| ' YUUGEN KAISHA '                                                              | ' YG YUGEN GAISHA '  |
| ' YUUGEN KAISYA '                                                              | ' YG YUGEN GAISHA '  |
| ' ZAVODU '                                                                     | ' ZAVOD '            |
| ' ZAVODY '                                                                     | ' ZAVOD '            |
| ' ZENTRALES '                                                                  | ' ZENT '             |
| ' ZENTRALE '                                                                   | ' ZENT '             |
| ' ZENTRALEN '                                                                  | ' ZENT '             |
| ' ZENTRALNA '                                                                  | ' ZENT '             |
| ' ZENTRUM '                                                                    | ' ZENT '             |
| ' ZENTRALINSTITUT '                                                            | ' ZENT INST '        |
| ' ZENTRALLABORATORIUM '                                                        | ' ZENT LAB '         |
| ' ZAIDAN HOJIN '                                                               | ' ZH '               |
| ' ZAIDAN HOUJIN '                                                              | ' ZH '               |
| ' LIMITED '                                                                    | ' LTD '              |
| ' LIMITADA '                                                                   | ' LTDA '             |
| ' SECRETARY '                                                                  | ' SEC '              |


** Compustat
:PROPERTIES:
:ID:       org:5lmhq6914gi0
:END:
COMPUSTAT specific standardization for organizational names. Implementation of initial part nameonly_main.do from  https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' COMPUSTAT specific standardization for organizational names
  ##'
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.replace.compustat <- function(x
                               , ...) {
    harmonize.replace(x
                    , patterns = cockburn.patterns.compustat
                    , ...)
  }



  ##' COMPUSTAT specific standardization for organizational names. Full name replacements.
  ##'
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.replace.compustat.names <- function(x
                                     , ...) {
    harmonize.replace(x
                    , patterns = cockburn.patterns.compustat.names
                    , patterns.type = "trim.exact"
                    , ...)
  }

  ## Test
  ## c("WESTINGHOUSE ELEC  "
  ## , "GRACE (W R) & CO"
  ## , "GRACE (W R) & CO Ltd.") %>% 
  ##   cockburn.compustat.names



#+END_SRC

*** Table: Compustat Standartization
- pattern type :: fixed (see doc for harmonize.replace)

#+call: make-rds-patterns-table(data = cockburn.patterns.compustat, data.name = "cockburn.patterns.compustat")
#+NAME: cockburn.patterns.compustat
| '-ADR'                                         | ' '                    |
| '-ADS'                                         | ' '                    |
| '-CL A '                                       | ' '                    |
| '-CL B '                                       | ' '                    |
| '-CONN '                                       | ' '                    |
| '-CONSOLIDATED '                               | ' '                    |
| '-DEL '                                        | ' '                    |
| '-DE '                                         | ' '                    |
| '-NY SHARES '                                  | ' '                    |
| '-OLD '                                        | ' '                    |
| '-ORD '                                        | ' '                    |
| '-PRE AMEND '                                  | ' '                    |
| '-PRE DIVEST '                                 | ' '                    |
| '-PREAMEND '                                   | ' '                    |
| '-PREDIVEST '                                  | ' '                    |
| '-PROJ '                                       | ' '                    |
| '-PROJECTED '                                  | ' '                    |
| '-PREF '                                       | ' '                    |
| '-PRE FASB '                                   | ' '                    |
| '-PREFASB '                                    | ' '                    |
| '-PRO FORMA '                                  | ' '                    |
| '- PRO FORMA '                                 | ' '                    |
| '-PRO FORMA1 '                                 | ' '                    |
| '-PRO FORMA2 '                                 | ' '                    |
| '-PRO FORMA3 '                                 | ' '                    |
| '-REDH '                                       | ' '                    |
| '-SER A COM '                                  | ' '                    |
| '-SER A '                                      | ' '                    |
| '-SPN '                                        | ' '                    |
| ' ACCPTNCE '                                   | ' ACCEPTANCE '         |
| ' BANCORPORATION '                             | ' BANCORP '            |
| ' BANCORPORTN '                                | ' BANCORP '            |
| ' BANCRP '                                     | ' BANCORP '            |
| ' BNCSHRS '                                    | ' BANCSHARES '         |
| ' BRWG '                                       | ' BREWING '            |
| ' CHEVRONTEXACO '                              | ' CHEVRON TEXACO '     |
| ' CHSE '                                       | ' CHASE '              |
| ' COMMN '                                      | ' COMMUNICATION '      |
| ' COMMUN '                                     | ' COMMUNICATION '      |
| ' COMMUNICATNS '                               | ' COMMUNICATION '      |
| ' COMMUNICATIONS '                             | ' COMMUNICATION '      |
| ' DPT STS '                                    | ' DEPT STORES '        |
| ' DPT '                                        | ' DEPT '               |
| ' ENRGY '                                      | ' ENERGY '             |
| ' FINL '                                       | ' FINANCIAL '          |
| ' FNCL '                                       | ' FINANCIAL '          |
| ' GRP '                                        | ' GROUP '              |
| ' HLDGS '                                      | ' HOLDINGS '           |
| ' HLDG '                                       | ' HOLDING '            |
| ' HLT NTWK '                                   | ' HEALTH NETWORK '     |
| ' HTLS RES '                                   | ' HOTELS & RESORTS '   |
| ' HLTH '                                       | ' HEALTH '             |
| ' INTRTECHNLGY '                               | ' INTERTECHNOLOGY '    |
| ' JPMORGAN '                                   | ' J P MORGAN '         |
| ' MED OPTIC '                                  | ' MEDICAL OPTICS '     |
| ' MINNESOTA MINING AND MANUFACTURING COMPANY ' | ' 3M COMPANY '         |
| ' NAT RES '                                    | ' NATURAL RESOURCES '  |
| ' NETWRKS '                                    | ' NETWORK '            |
| ' PHARMACTICALS '                              | ' PHARM '              |
| ' PHARMACT '                                   | ' PHARM '              |
| ' PPTYS TST '                                  | ' PROPERTIES TRUST '   |
| ' PPTY '                                       | ' PROPERTY '           |
| ' PROPERTY TR '                                | ' PROPERTY TRUST '     |
| ' PAC RAILWY '                                 | ' PACIFIC RAILWAY '    |
| ' SEMICONDTR '                                 | ' SEMICONDUCTOR '      |
| ' SOLU '                                       | ' SOLUTIONS '          |
| ' ST & ALMN '                                  | ' STEEL & ALUMINUM '   |
| ' STD '                                        | ' STANDARD '           |
| ' TECHNOLGS '                                  | ' TECH '               |
| ' TECHNOL '                                    | ' TECH '               |
| ' TRANSPORTATN '                               | ' TRANSPORTATION '     |
| ' ADVERTSG '                                   | ' ADVERTISING '        |
| ' ADVNTGE '                                    | ' ADVANTAGE '          |
| ' AIRLN '                                      | ' AIRLINES '           |
| ' AIRLS '                                      | ' AIRLINES '           |
| ' AM '                                         | ' AMERICA '            |
| ' AMER '                                       | ' AMERICAN '           |
| ' APPLIAN '                                    | ' APPLIANCES '         |
| ' APPLICTN '                                   | ' APPLICATIONS '       |
| ' ARCHTCTS '                                   | ' ARCHITECTS '         |
| ' ASSD '                                       | ' ASSOCIATED '         |
| ' ASSOC '                                      | ' ASSOCIATES '         |
| ' ASSOCS '                                     | ' ASSOCIATES '         |
| ' ATOMC '                                      | ' ATOMIC '             |
| ' BANCSH '                                     | ' BANCSHARES '         |
| ' BANCSHR '                                    | ' BANCSHARES '         |
| ' BCSHS '                                      | ' BANCSHARES '         |
| ' BK '                                         | ' BANK '               |
| ' BLDGS '                                      | ' BUILDINGS '          |
| ' BROADCASTG '                                 | ' BROADCASTING '       |
| ' BTLNG '                                      | ' BOTTLING '           |
| ' CBLVISION '                                  | ' CABLEVISION '        |
| ' CENTRS '                                     | ' CENTERS '            |
| ' CHAMPNSHIP '                                 | ' CHAMPIONSHIP '       |
| ' CMMNCTNS '                                   | ' COMMUNICATIONS '     |
| ' CNVRSION '                                   | ' CONVERSION '         |
| ' COFF '                                       | ' COFFEE '             |
| ' COMM '                                       | ' COMMUNICATIONS '     |
| ' COMMUN '                                     | ' COMMUNICATIONS '     |
| ' COMMUNCTN '                                  | ' COMMUNICATIONS '     |
| ' COMMUNICTNS '                                | ' COMMUNICATIONS '     |
| ' COMP '                                       | ' COMPUTERS '          |
| ' COMPUTR '                                    | ' COMPUTER '           |
| ' CONFERENCG '                                 | ' CONFERENCING '       |
| ' CONSTRN '                                    | ' CONSTR '             |
| ' CONTL '                                      | ' CONTINENTAL '        |
| ' CONTNT '                                     | ' CONTINENTAL '        |
| ' CONTRL '                                     | ' CONTROL '            |
| ' CONTRL '                                     | ' CONTROL '            |
| ' CTR '                                        | ' CENTER '             |
| ' CTRS '                                       | ' CENTERS '            |
| ' CVRGS '                                      | ' COVERINGS '          |
| ' DEV '                                        | ' DEVELOPMENT '        |
| ' DEVL '                                       | ' DEVELOPMENT '        |
| ' DEVLP '                                      | ' DEVELOPMENT '        |
| ' DISTR '                                      | ' DISTRIBUTION '       |
| ' DISTRIBUT '                                  | ' DISTRIBUTION '       |
| ' DISTRIBUTN '                                 | ' DISTRIBUTION '       |
| ' ELCTRNCS '                                   | ' ELECTRONICS '        |
| ' ELECTR '                                     | ' ELECTRONICS '        |
| ' ENGNRD '                                     | ' ENGINEERED '         |
| ' ENMT '                                       | ' ENTERTAINMENT '      |
| ' ENTERTAIN '                                  | ' ENTERTAINMENT '      |
| ' ENTERTNMNT '                                 | ' ENTERTAINMENT '      |
| ' ENTMNT '                                     | ' ENTERTAINMENT '      |
| ' ENTMT '                                      | ' ENTERTAINMENT '      |
| ' ENTRPR '                                     | ' ENTERPRISES '        |
| ' ENTRPRISE '                                  | ' ENTERPRISES '        |
| ' ENTRPRS '                                    | ' ENTERPRISES '        |
| ' ENVIR '                                      | ' ENVIRONMENTAL '      |
| ' ENVIRNMNTL '                                 | ' ENVIRONMENTAL '      |
| ' ENVR '                                       | ' ENVIRONMENTAL '      |
| ' EQUIPMT '                                    | ' EQUIPMENT '          |
| ' EXCHG '                                      | ' EXCHANGE '           |
| ' EXPLOR '                                     | ' EXPLORATION '        |
| ' FNDG '                                       | ' FUNDING '            |
| ' GLD '                                        | ' GOLD '               |
| ' GP '                                         | ' GROUP '              |
| ' HLDS '                                       | ' HLDGS '              |
| ' HLTHCARE '                                   | ' HEALTHCARE '         |
| ' HLTHCR '                                     | ' HEALTHCARE '         |
| ' HOMEMDE '                                    | ' HOMEMADE '           |
| ' HSPTL '                                      | ' HOSPITAL '           |
| ' ILLUM '                                      | ' ILLUMINATION '       |
| ' INDL '                                       | ' INDUSTRIAL '         |
| ' INDPT '                                      | ' INDEPENDENT '        |
| ' INDTY '                                      | ' INDEMNITY '          |
| ' INFORMATN '                                  | ' INFO '               |
| ' INSTNS '                                     | ' INSTITUTIONS '       |
| ' INSTRUMEN '                                  | ' INSTRUMENTS '        |
| ' INSTRUMNT '                                  | ' INSTRUMENTS '        |
| ' INTEGRATRS '                                 | ' INTEGRATORS '        |
| ' INTERNATIONL '                               | ' INT '                |
| ' INVS '                                       | ' INVESTMENTS '        |
| ' INVT '                                       | ' INVESTMENT '         |
| ' MANAGEMNT '                                  | ' MANAGEMENT '         |
| ' MANAGMNT '                                   | ' MANAGEMENT '         |
| ' MANHATN '                                    | ' MANHATTAN '          |
| ' MANUF '                                      | ' MFG '                |
| ' MDSE '                                       | ' MERCHANDISING '      |
| ' MEASURMNT '                                  | ' MEASUREMENT '        |
| ' MERCHNDSNG '                                 | ' MERCHANDISING '      |
| ' MGMT '                                       | ' MANAGEMENT '         |
| ' MGRS '                                       | ' MANAGERS '           |
| ' MGT '                                        | ' MANAGEMENT '         |
| ' MICROWAV '                                   | ' MICROWAVE '          |
| ' MKTS '                                       | ' MARKETS '            |
| ' MLTIMEDIA '                                  | ' MULTIMEDIA '         |
| ' MTG '                                        | ' MORTGAGE '           |
| ' MTNS '                                       | ' MOUTAINS '           |
| ' MTRS '                                       | ' MOTORS '             |
| ' NETWRK '                                     | ' NETWORK '            |
| ' NOWEST '                                     | ' NORTHWEST '          |
| ' NTWRK '                                      | ' NETWORK '            |
| ' OFFSHRE '                                    | ' OFFSHORE '           |
| ' ORGANIZTN '                                  | ' ORG '                |
| ' PBLG '                                       | ' PUBLISHING '         |
| ' PHARMACEUTICL '                              | ' PHARM '              |
| ' PLAST '                                      | ' PLASTICS '           |
| ' PPTYS '                                      | ' PROPERTIES '         |
| ' PRODS '                                      | ' PROD '               |
| ' PRODTN '                                     | ' PRODN '              |
| ' PRODUCTN '                                   | ' PRODN '              |
| ' PRPANE '                                     | ' PROPANE '            |
| ' PTS '                                        | ' PARTS '              |
| ' PUBLISH '                                    | ' PUBLISHING '         |
| ' PUBLSHING '                                  | ' PUBLISHING '         |
| ' PUBN '                                       | ' PUBLICATIONS '       |
| ' PUBNS '                                      | ' PUBLICATIONS '       |
| ' PWR '                                        | ' POWER '              |
| ' RAILRD '                                     | ' RAILROAD '           |
| ' RECREATN '                                   | ' RECREATION '         |
| ' RECYCL '                                     | ' RECYCLING '          |
| ' REFIN '                                      | ' REFINING '           |
| ' REFNG '                                      | ' REFINING '           |
| ' RESTR '                                      | ' RESTAURANT '         |
| ' RESTS '                                      | ' RESTAURANTS '        |
| ' RETAILNG '                                   | ' RETAILING '          |
| ' RLTY '                                       | ' REALTY '             |
| ' RR '                                         | ' RAILROAD '           |
| ' RSCH '                                       | ' RESEARCH '           |
| ' RTNG '                                       | ' RATING '             |
| ' SCIENTIF '                                   | ' SCIENTIFIC '         |
| ' SERV '                                       | ' SERVICES '           |
| ' SLTNS '                                      | ' SOLUTIONS '          |
| ' SOFTWRE '                                    | ' SOFTWARE '           |
| ' SOLTNS '                                     | ' SOLUTIONS '          |
| ' SOLUT '                                      | ' SOLUTIONS '          |
| ' SRVC '                                       | ' SERVICES '           |
| ' SRVCS '                                      | ' SERVICES '           |
| ' STEAKHSE '                                   | ' STEAKHOUSE '         |
| ' STHWST '                                     | ' SOUTHWEST '          |
| ' STL '                                        | ' STEEL '              |
| ' STRS '                                       | ' STORES '             |
| ' SUP '                                        | ' SUPPLY '             |
| ' SUPERMKTS '                                  | ' SUPERMARKETS '       |
| ' SUPP '                                       | ' SUPPLIES '           |
| ' SURVYS '                                     | ' SURVEYS '            |
| ' SVC '                                        | ' SERVICES '           |
| ' SVCS '                                       | ' SERVICES '           |
| ' SVSC '                                       | ' SERVICES '           |
| ' SYS '                                        | ' SYSTEMS '            |
| ' SYSTM '                                      | ' SYSTEMS '            |
| ' TCHNLGY '                                    | ' TECH '               |
| ' TECHNGS '                                    | ' TECHNOLOGIES '       |
| ' TECHNL '                                     | ' TECH '               |
| ' TECHNLGIES '                                 | ' TECHNOLOGIES '       |
| ' TEL '                                        | ' TELEPHONE '          |
| ' TELE-COMM '                                  | ' TELECOMMUNICATIONS ' |
| ' TELE-COMMUN '                                | ' TELECOMMUNICATIONS ' |
| ' TELECOMMS '                                  | ' TELECOMMUNICATIONS ' |
| ' TELECONFERENC '                              | ' TELECONFERENCING '   |
| ' TELEG '                                      | ' TELEGRAPH '          |
| ' TELEGR '                                     | ' TELEGRAPH '          |
| ' TELVSN '                                     | ' TELEVISION '         |
| ' TR '                                         | ' TRUST '              |
| ' TRANSN '                                     | ' TRANSPORTATION '     |
| ' TRANSPORTN '                                 | ' TRANSPORTATION '     |
| ' TRNSACTN '                                   | ' TRANSACTION '        |
| ' UTD '                                        | ' UNITED '             |
| ' WSTN '                                       | ' WESTERN '            |
| ' WTR '                                        | ' WATER '              |




*** Table: Compustat Standartization Names
- pattern type :: trim.exact (see doc for harmonize.replace)

#+call: make-rds-patterns-table(data = cockburn.patterns.compustat.names, data.name = "cockburn.patterns.compustat.names")

#+name: cockburn.patterns.compustat.names
| ' A. L. WILLIAMS CORP. '                       | 'WILLIAMS (A.L.) CORP'       |
| ' B. F. GOODRICH CO. '                         | 'GOODRICH CORP'              |
| ' BELL + HOWELL COMPANY '                      | 'BELL & HOWELL OPERATING CO' |
| ' BENDIX CORPORATION(NOW ALLIED-SIGNAL INC.) ' | 'BENDIX CORP'                |
| ' BORG-WARNER CORPORATION '                    | 'BORGWARNER INC'             |
| ' CHRYSLER MOTORS CORPORATION '                | 'CHRYSLER CORP'              |
| ' CISCO TECHNOLOGY, INC. '                     | 'CISCO SYSTEMS INC'          |
| ' DELL PRODUCTS, L.P. '                        | 'DELL INC'                   |
| ' DELPHI TECHNOLOGIES, INC. '                  | 'DELPHI CORP'                |
| ' E. I. DU PONT DE NEMOURS AND COMPANY '       | 'DU PONT (E I) DE NEMOURS'   |
| ' E. R. SQUIBB + SONS, INC. '                  | 'SQUIBB CORP'                |
| ' ELI LILLY AND COMPANY '                      | 'LILLY (ELI) & CO'           |
| ' G. D. SEARLE & CO. '                         | 'SEARLE (G.D.) & CO'         |
| ' MINNESOTA MINING AND MANUFACTURING COMPANY ' | '3M CO'                      |
| ' OWENS-CORNING FIBERGLAS CORPORATION '        | 'OWENS CORNING'              |
| ' SCHLUMBERGER TECHNOLOGY CORPORATION '        | 'SCHLUMBERGER LTD'           |
| ' SCI-MED LIFE SYSTEMS, INC. '                 | 'SICMED LIFE SYSTEMS'        |
| ' TDK CORPORATION '                            | 'TDK CORP'                   |
| ' UNITED STATES SURGICAL CORPORATION '         | 'U S SURGICAL CORP'          |
| ' W. R. GRACE & CO. '                          | 'GRACE (W R) & CO'           |
| ' WESTINGHOUSE ELECTRIC CORP. '                | 'WESTINGHOUSE ELEC'          |






** Identify Entity Type
:PROPERTIES:
:ID:       org:fyt54a51nki0
:END:
#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Identifies Entity Type
  ##'
  ##' @param x vector or table
  ##' @param procedures.message For debuging. If set will message which procedures were done.
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.detect.type <- function(x
                                 , procedures.message = FALSE
                                 , ...) {
    procedure.message <- function(x, name) {
      if(procedures.message) message(name)
      return(x)
    }
    x %>% 
      cockburn.detect.corp(...) %T>% 
      procedure.message("cockburn.detect.corp") %>%
      cockburn.detect.indiv(...) %T>% 
      procedure.message("cockburn.detect.indiv") %>%
      cockburn.detect.govt(...) %T>% 
      procedure.message("cockburn.detect.govt") %>%
      cockburn.detect.univ(...) %T>% 
      procedure.message("cockburn.detect.univ") %>%
      cockburn.detect.inst(...) %T>% 
      procedure.message("cockburn.detect.inst") %T>%
      cockburn.detect.inst.conds(...) %T>% 
      procedure.message("cockburn.detect.inst.conds") %>%
      cockburn.detect.inst.german(...) %T>% 
      procedure.message("cockburn.detect.inst.german") %>%
      cockburn.detect.hosp(...) %T>% 
      procedure.message("cockburn.detect.hosp") %>%
      return()
  }

  ##' Cleanup Entity Type
  ##'
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.replace.type <- function(x, ...) {
    x %>% 
      cockburn.replace.govt(...) %>% 
      cockburn.replace.univ(...) %>% 
      return()
  }
#+END_SRC

#+BEGIN_SRC R :tangle no
   ## ## Tests
  c(" DR VLASOV "
  , " S.VLASOV PHD "
  , " STANICA LEGALY REPRESENTED BY STAS"
  , " DR VLASOV & BROTHER "
  , "MSlab & C"
  , "LEGALY REPRESENTED BY STAS"
  , " REPUBLIC LEGALY REPRESENTED BY STAS"
  , " TILBURG UNIVERSTIY "
  , " VU UNIVERSTITAET "
  , " FUNDATION LEGALY REPRESENTED BY STAS") %>%
    cockburn.detect.type(procedures.message = TRUE)
    ## cockburn.detect.type(codes.name = "type")

  data.table(name = c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
                    , "MSLab CÖ. <a href=lsdldf> <br> <\\a>"
                    , "MSLab Co."
                    , "MSLaeb Comp."
                    , "MSLab Comp. Ltd."
                    , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ  UNIVERSITY") %>% rep(20)
           , foo = "I love coffee" ) %>%
    cockburn.detect.type


  c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
                    , "MSLab CÖ. <a href=lsdldf> <br> <\\a>"
                    , "MSLab Co."
                    , "MSLaeb Comp."
                    , "MSLab Comp. Ltd."
  , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ UNIVERSITY") %>% rep(20) %>%
    cockburn.detect.type
#+END_SRC

*** Firms (Corporates)
:PROPERTIES:
:ID:       org:nvtj6q51nki0
:END:
- code :: "firm"
#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Detect Corporates (code - "firm")
  ##'
  ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
  ##' 
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.detect.corp <- function(x
                                 , codes.name = "entity.type"
                                 , x.codes.merge = TRUE 
                                 , ...) {
    harmonize.detect(x
                   , codes.name = codes.name
                   , x.codes.merge = x.codes.merge
                   , patterns = cockburn.patterns.corp
                   , codes = "firm"
                   , return.only.first.detected.code = TRUE
                   , ...)
  }

  ## test
  ## c(" DR VLASOV & BROTHER "
  ## ,  "MSlab & C"
  ## , " S.VLASOV PHD "
  ## , "LEGALY REPRESENTED BY STAS") %>%
  ## cockburn.detect.corp
#+END_SRC

**** table - cockburn.patterns.corp

#+call: make-rds-patterns-table(data = cockburn.patterns.corp, data.name = "cockburn.patterns.corp")

#+name: cockburn.patterns.corp
| ' & BRO '                                                |
| ' & BROTHER '                                            |
| ' & C '                                                  |
| ' & CIE '                                                |
| ' & CO '                                                 |
| ' & FILS '                                               |
| ' & PARTNER '                                            |
| ' & SOEHNE '                                             |
| ' & SOHN '                                               |
| ' & SON '                                                |
| ' & SONS '                                               |
| ' & ZN '                                                 |
| ' & ZONEN '                                              |
| ' A '                                                    |
| ' A G '                                                  |
| ' A RL '                                                 |
| ' A S '                                                  |
| ' AANSPRAKELIJKHEID '                                    |
| ' AB '                                                   |
| ' ACTIEN GESELLSCHAFT '                                  |
| ' ACTIENGESELLSCHAFT '                                   |
| ' AD '                                                   |
| ' ADVIESBUREAU '                                         |
| ' AE '                                                   |
| ' AG '                                                   |
| ' AG & CO '                                              |
| ' AGG '                                                  |
| ' AGSA '                                                 |
| ' AK TIEBOLAGET '                                        |
| ' AKIEBOLAG '                                            |
| ' AKIEBOLG '                                             |
| ' AKIENGESELLSCHAFT '                                    |
| ' AKITENGESELLSCHAFT '                                   |
| ' AKITIEBOLAG '                                          |
| ' AKLIENGISELLSCHAFT '                                   |
| ' AKSJESELSKAP '                                         |
| ' AKSJESELSKAPET '                                       |
| ' AKSTIEBOLAGET '                                        |
| ' AKTAINGESELLSCHAFT '                                   |
| ' AKTEIBOLAG '                                           |
| ' AKTEINGESELLSCHAFT '                                   |
| ' AKTIBOLAG '                                            |
| ' AKTIE BOLAGET '                                        |
| ' AKTIEBDAG '                                            |
| ' AKTIEBLOAG '                                           |
| ' AKTIEBOALG '                                           |
| ' AKTIEBOALGET '                                         |
| ' AKTIEBOCAG '                                           |
| ' AKTIEBOLAC '                                           |
| ' AKTIEBOLAF '                                           |
| ' AKTIEBOLAG '                                           |
| ' AKTIEBOLAGET '                                         |
| ' AKTIEBOLAQ '                                           |
| ' AKTIEBOLOG '                                           |
| ' AKTIEGBOLAG '                                          |
| ' AKTIEGESELLSCHAFT '                                    |
| ' AKTIEGOLAGET '                                         |
| ' AKTIELBOLAG '                                          |
| ' AKTIEN '                                               |
| ' AKTIEN GESELLSCHAFT '                                  |
| ' AKTIENBOLAG '                                          |
| ' AKTIENBOLAGET '                                        |
| ' AKTIENEGESELLSCHAFT '                                  |
| ' AKTIENEGSELLSCHAFT '                                   |
| ' AKTIENGEGESELLSCHAFT '                                 |
| ' AKTIENGELLSCHAFT '                                     |
| ' AKTIENGESCELLSCHAFT '                                  |
| ' AKTIENGESELL SCHAFT '                                  |
| ' AKTIENGESELLCHAFT '                                    |
| ' AKTIENGESELLESCHAFT '                                  |
| ' AKTIENGESELLESHAFT '                                   |
| ' AKTIENGESELLS '                                        |
| ' AKTIENGESELLSCAFT '                                    |
| ' AKTIENGESELLSCGAFT '                                   |
| ' AKTIENGESELLSCHAFT '                                   |
| ' AKTIENGESELLSCHART '                                   |
| ' AKTIENGESELLSCHATT '                                   |
| ' AKTIENGESELLSCHGT '                                    |
| ' AKTIENGESELLSCHRAFT '                                  |
| ' AKTIENGESELLSHAFT '                                    |
| ' AKTIENGESELLSHAT '                                     |
| ' AKTIENGESELLSHCAFT '                                   |
| ' AKTIENGESELSCHAFT '                                    |
| ' AKTIENGESESCHAFT '                                     |
| ' AKTIENGESILLSCHAFT '                                   |
| ' AKTIENGESLLSCHAFT '                                    |
| ' AKTIENGESSELLSCHAFT '                                  |
| ' AKTIENGESSELSCHAFT '                                   |
| ' AKTIENGSELLSCHAFT '                                    |
| ' AKTIENGTESELLSCHAFT '                                  |
| ' AKTIENRESELLSCHAFT '                                   |
| ' AKTIESELSKAB '                                         |
| ' AKTIESELSKABET '                                       |
| ' AKTINGESELLSCHAFT '                                    |
| ' AKTSIONERNAYA KOMPANIA '                               |
| ' AKTSIONERNO '                                          |
| ' AKTSIONERNOE OBCHESTVO '                               |
| ' AKTSIONERNOE OBSCHEDTVO '                              |
| ' AKTSIONERNOE OBSCNESTVO '                              |
| ' AKTSIONERNOE OBSHESTVO '                               |
| ' AKTSIONERNOE OSBCHESTVO '                              |
| ' AKTSIONERNOEOBSCHESTVO '                               |
| ' ALTIENGESELLSCHAFT '                                   |
| ' AMBA '                                                 |
| ' AND SONS '                                             |
| ' ANDELSSELSKABET '                                      |
| ' ANLAGENGESELLSCHAFT '                                  |
| ' APPARATEBAU '                                          |
| ' APPERATEBAU '                                          |
| ' ARL '                                                  |
| ' AS '                                                   |
| ' ASA '                                                  |
| ' ASKTIENGESELLSCHAFT '                                  |
| ' ASOCIADOS '                                            |
| ' ASSCOIATES '                                           |
| ' ASSOCIADOS '                                           |
| ' ASSOCIATE '                                            |
| ' ASSOCIATED '                                           |
| ' ASSOCIATES '                                           |
| ' ASSOCIATI '                                            |
| ' ASSOCIATO '                                            |
| ' ASSOCIES '                                             |
| ' ASSSOCIATES '                                          |
| ' ATELIER '                                              |
| ' ATELIERS '                                             |
| ' ATIBOLAG '                                             |
| ' ATKIEBOLAG '                                           |
| ' ATKIENGESELLSCHAFT '                                   |
| ' AVV '                                                  |
| ' B '                                                    |
| ' BANK '                                                 |
| ' BANQUE '                                               |
| ' BEDRIJF '                                              |
| ' BEDRIJVEN '                                            |
| ' BEPERK '                                               |
| ' BEPERKTE AANSPREEKLIJKHEID '                           |
| ' BESCHRAENKTER HAFTUNG '                                |
| ' BESCHRANKTER '                                         |
| ' BESCHRANKTER HAFTUNG '                                 |
| ' BESLOTENGENOOTSCHAP '                                  |
| ' BESLOTENVENNOOTSCHAP '                                 |
| ' BETRIEBE '                                             |
| ' BMBH '                                                 |
| ' BRANDS '                                               |
| ' BROS '                                                 |
| ' BUSINESS '                                             |
| ' BV '                                                   |
| ' BV: '                                                  |
| ' BV? '                                                  |
| ' BVBA '                                                 |
| ' BVBASPRL '                                             |
| ' BVIO '                                                 |
| ' BVSA '                                                 |
| ' C{OVERSCORE O}RP '                                     |
| ' CAMPAGNIE '                                            |
| ' CAMPANY '                                              |
| ' CC '                                                   |
| ' CIE '                                                  |
| ' CMOPANY '                                              |
| ' CO '                                                   |
| ' CO OPERATIVE '                                         |
| ' CO OPERATIVES '                                        |
| ' CO: '                                                  |
| ' COFP '                                                 |
| ' COIRPORATION '                                         |
| ' COMANY '                                               |
| ' COMAPANY '                                             |
| ' COMERCIAL '                                            |
| ' COMERCIO '                                             |
| ' COMMANDITE SIMPLE '                                    |
| ' COMMERCIALE '                                          |
| ' COMMERCIALISATIONS '                                   |
| ' COMNPANY '                                             |
| ' COMP '                                                 |
| ' COMPAGNE '                                             |
| ' COMPAGNI '                                             |
| ' COMPAGNIE '                                            |
| ' COMPAGNIN '                                            |
| ' COMPAGNY '                                             |
| ' COMPAIGNIE '                                           |
| ' COMPAMY '                                              |
| ' COMPANAY '                                             |
| ' COMPANH '                                              |
| ' COMPANHIA '                                            |
| ' COMPANIA '                                             |
| ' COMPANIE '                                             |
| ' COMPANIES '                                            |
| ' COMPANY '                                              |
| ' COMPAY '                                               |
| ' COMPNAY '                                              |
| ' COMAPNY '                                              |
| ' COMPNY '                                               |
| ' COMPORATION '                                          |
| ' CONSORTILE PER AZIONE '                                |
| ' CONSORZIO '                                            |
| ' CONSTRUCTIONS '                                        |
| ' CONSULTING '                                           |
| ' CONZORZIO '                                            |
| ' COOEPERATIE '                                          |
| ' COOEPERATIEVE '                                        |
| ' COOEPERATIEVE VERENIGING '                             |
| ' COOEPERATIEVE VERKOOP '                                |
| ' COOP '                                                 |
| ' COOP A RL '                                            |
| ' COOPERATIE '                                           |
| ' COOPERATIEVE '                                         |
| ' COOPERATIEVE VENOOTSCHAP '                             |
| ' COOPERATION '                                          |
| ' COOPERATIVA AGICOLA '                                  |
| ' COOPERATIVA LIMITADA '                                 |
| ' COOPERATIVA PER AZIONI '                               |
| ' COORPORATION '                                         |
| ' COPANY '                                               |
| ' COPORATION '                                           |
| ' COPR '                                                 |
| ' COPRORATION '                                          |
| ' COPRPORATION '                                         |
| ' COROPORTION '                                          |
| ' COROPRATION '                                          |
| ' COROPROATION '                                         |
| ' CORORATION '                                           |
| ' CORP '                                                 |
| ' CORPARATION '                                          |
| ' CORPERATION '                                          |
| ' CORPFORATION '                                         |
| ' CORPN '                                                |
| ' CORPO '                                                |
| ' CORPOARTION '                                          |
| ' CORPOATAION '                                          |
| ' CORPOATION '                                           |
| ' CORPOIRATION '                                         |
| ' CORPOORATION '                                         |
| ' CORPOPRATION '                                         |
| ' CORPORAATION '                                         |
| ' CORPORACION '                                          |
| ' CORPORAION '                                           |
| ' CORPORAITON '                                          |
| ' CORPORARION '                                          |
| ' CORPORARTION '                                         |
| ' CORPORATAION '                                         |
| ' CORPORATE '                                            |
| ' CORPORATED '                                           |
| ' CORPORATI '                                            |
| ' CORPORATIION '                                         |
| ' CORPORATIN '                                           |
| ' CORPORATINO '                                          |
| ' CORPORATINON '                                         |
| ' CORPORATIO '                                           |
| ' CORPORATIOIN '                                         |
| ' CORPORATIOLN '                                         |
| ' CORPORATIOM '                                          |
| ' CORPORATION '                                          |
| ' CORPORATIOPN '                                         |
| ' CORPORATITON '                                         |
| ' CORPORATOIN '                                          |
| ' CORPORDATION '                                         |
| ' CORPORQTION '                                          |
| ' CORPORTAION '                                          |
| ' CORPORTATION '                                         |
| ' CORPORTION '                                           |
| ' CORPPORATION '                                         |
| ' CORPRATION '                                           |
| ' CORPROATION '                                          |
| ' CORPRORATION '                                         |
| ' CROP '                                                 |
| ' CROPORATION '                                          |
| ' CRPORATION '                                           |
| ' CV '                                                   |
| ' D ENTERPRISES '                                        |
| ' D ENTREPRISE '                                         |
| ' D O O '                                                |
| ' D’ENTREPRISE '                                         |
| ' DD '                                                   |
| ' DEVELOP '                                              |
| ' DEVELOPPEMENT '                                        |
| ' DEVELOPPEMENTS '                                       |
| ' DOING BUSINESS '                                       |
| ' DOO '                                                  |
| ' DORPORATION '                                          |
| ' EDMS '                                                 |
| ' EG '                                                   |
| ' ELECTRONIQUE '                                         |
| ' EN ZN '                                                |
| ' EN ZONEN '                                             |
| ' ENGINEERING '                                          |
| ' ENGINEERS '                                            |
| ' ENGINES '                                              |
| ' ENNOBLISSEMENT '                                       |
| ' ENTERPRISE '                                           |
| ' ENTRE PRISES '                                         |
| ' ENTREPOSE '                                            |
| ' ENTREPRISE '                                           |
| ' ENTREPRISES '                                          |
| ' EQUIP '                                                |
| ' EQUIPAMENTOS '                                         |
| ' EQUIPEMENT '                                           |
| ' EQUIPEMENTS '                                          |
| ' EQUIPMENT '                                            |
| ' EST '                                                  |
| ' ESTABILSSEMENTS '                                      |
| ' ESTABLISHMENT '                                        |
| ' ESTABLISSEMENT '                                       |
| ' ESTABLISSEMENTS '                                      |
| ' ESTABLISSMENTS '                                       |
| ' ET FILS '                                              |
| ' ETABLISSEMENT '                                        |
| ' ETABLISSMENTS '                                        |
| ' ETS '                                                  |
| ' FABRIC '                                               |
| ' FABRICA '                                              |
| ' FABRICATION '                                          |
| ' FABRICATIONS '                                         |
| ' FABRICS '                                              |
| ' FABRIEKEN '                                            |
| ' FABRIK '                                               |
| ' FABRIQUE '                                             |
| ' FABRYKA '                                              |
| ' FACTORY '                                              |
| ' FEDERATED '                                            |
| ' FILM '                                                 |
| ' FINANCIERE '                                           |
| ' FIRM '                                                 |
| ' FIRMA '                                                |
| ' GBMH '                                                 |
| ' GBR '                                                  |
| ' GEBR '                                                 |
| ' GEBROEDERS '                                           |
| ' GEBRUEDER '                                            |
| ' GENERALE POUR LES TECHNIQUES NOUVELLE '                |
| ' GENOSSENSCHAFT '                                       |
| ' GES M B H '                                            |
| ' GES MB H '                                             |
| ' GES MBH '                                              |
| ' GES MHH '                                              |
| ' GESELLSCHAFT '                                         |
| ' GESELLSCHAFT M B '                                     |
| ' GESELLSCHAFT MB H '                                    |
| ' GESELLSCHAFT MBH '                                     |
| ' GESELLSCHAFT MGH '                                     |
| ' GESELLSCHAFT MIT '                                     |
| ' GESELLSCHAFT MIT BESCHRANKTER '                        |
| ' GESELLSCHAFT MIT BESCHRANKTER HAFT '                   |
| ' GESELLSCHAFTMIT BESCHRANKTER '                         |
| ' GESMBH '                                               |
| ' GES '                                                  |
| ' GESSELLSCHAFT MIT BESCHRAENKTER HAUFTUNG '             |
| ' GIE '                                                  |
| ' GMBA '                                                 |
| ' GMBB '                                                 |
| ' GMBG '                                                 |
| ' GMBH '                                                 |
| ' GMHB '                                                 |
| ' GNBH '                                                 |
| ' GORPORATION '                                          |
| ' GROEP '                                                |
| ' GROUP '                                                |
| ' GROUPEMENT D ENTREPRISES '                             |
| ' H '                                                    |
| ' HAFRUNG '                                              |
| ' HANDEL '                                               |
| ' HANDELABOLAGET '                                       |
| ' HANDELEND ONDER '                                      |
| ' HANDELORGANISATION '                                   |
| ' HANDELS '                                              |
| ' HANDELSBOLAG '                                         |
| ' HANDELSBOLAGET '                                       |
| ' HANDELSGESELLSCHAFT '                                  |
| ' HANDESBOLAG '                                          |
| ' HATFUNG '                                              |
| ' HB '                                                   |
| ' HF '                                                   |
| ' HOLDINGS '                                             |
| ' INC '                                                  |
| ' INC: '                                                 |
| ' INCOPORATED '                                          |
| ' INCORORATED '                                          |
| ' INCORPARATED '                                         |
| ' INCORPATED '                                           |
| ' INCORPORATE '                                          |
| ' INCORPORATED '                                         |
| ' INCORPORORATED '                                       |
| ' INCORPORTED '                                          |
| ' INCORPOTATED '                                         |
| ' INCORPRATED '                                          |
| ' INCORPRORATED '                                        |
| ' INCROPORATED '                                         |
| ' INDISTRIES '                                           |
| ' INDUSRTIES '                                           |
| ' INDUSTRI '                                             |
| ' INDUSTRIA '                                            |
| ' INDUSTRIAL '                                           |
| ' INDUSTRIAL COP '                                       |
| ' INDUSTRIALNA '                                         |
| ' INDUSTRIAS '                                           |
| ' INDUSTRIE '                                            |
| ' INDUSTRIES '                                           |
| ' INDUSTRIJA '                                           |
| ' INDUSTRIJSKO '                                         |
| ' INGENIEURBUERO '                                       |
| ' INGENIEURBURO '                                        |
| ' INGENIEURGESELLSCHAFT '                                |
| ' INGENIEURSBUERO '                                      |
| ' INGENIEURSBUREAU '                                     |
| ' INGENIOERSBYRA '                                       |
| ' INGENJOERSFIRMA '                                      |
| ' INGENJOERSFIRMAN '                                     |
| ' INORPORATED '                                          |
| ' INT '                                                  |
| ' INT L '                                                |
| ' INTERNAITONAL '                                        |
| ' INTERNATIONAL '                                        |
| ' INTERNATIONAL BUSINESS '                               |
| ' INTERNATIONALE '                                       |
| ' INTERNATIONAUX '                                       |
| ' INTERNTIONAL '                                         |
| ' INTL '                                                 |
| ' INUDSTRIE '                                            |
| ' INVESTMENT '                                           |
| ' IS '                                                   |
| ' JOINTVENTURE '                                         |
| ' K G '                                                  |
| ' K K '                                                  |
| ' KABAUSHIKI KAISHA '                                    |
| ' KABISHIKI KAISHA '                                     |
| ' KABSUHIKI '                                            |
| ' KABUSHI KIKAISHA '                                     |
| ' KABUSHIBI KAISHA '                                     |
| ' KABUSHIKAISHA '                                        |
| ' KABUSHIKI '                                            |
| ' KABUSHIKKAISHA '                                       |
| ' KABUSHIKU KASISHA '                                    |
| ' KABUSHKIKI KAISHI '                                    |
| ' KABUSIKI '                                             |
| ' KABUSIKI KAISHA '                                      |
| ' KABUSIKI KAISYA '                                      |
| ' KABUSIKIKAISHA '                                       |
| ' KAGUSHIKI KAISHA '                                     |
| ' KAUSHIKI KAISHA '                                      |
| ' KAISHA '                                               |
| ' KAISYA '                                               |
| ' KABAUSHIKI GAISHA '                                    |
| ' KABISHIKI GAISHA '                                     |
| ' KABUSHI KIGAISHA '                                     |
| ' KABUSHIBI GAISHA '                                     |
| ' KABUSHIGAISHA '                                        |
| ' KABUSHIKGAISHA '                                       |
| ' KABUSHIKU GASISHA '                                    |
| ' KABUSHKIKI GAISHI '                                    |
| ' KABUSIKI GAISHA '                                      |
| ' KABUSIKI GAISYA '                                      |
| ' KABUSIKIGAISHA '                                       |
| ' KAGUSHIKI GAISHA '                                     |
| ' KAUSHIKI GAISHA '                                      |
| ' GAISHA '                                               |
| ' GAISYA '                                               |
| ' KB '                                                   |
| ' KB KY '                                                |
| ' KFT '                                                  |
| ' KG '                                                   |
| ' KGAA '                                                 |
| ' KK '                                                   |
| ' KOM GES '                                              |
| ' KOMM GES '                                             |
| ' KOMMANDITBOLAG '                                       |
| ' KOMMANDITBOLAGET '                                     |
| ' KOMMANDITGESELLSCHAFT '                                |
| ' KONSTRUKTIONEN '                                       |
| ' KOOPERATIVE '                                          |
| ' KS '                                                   |
| ' KUBUSHIKI KAISHA '                                     |
| ' KY '                                                   |
| ' L '                                                    |
| ' L C '                                                  |
| ' L L C '                                                |
| ' L P '                                                  |
| ' LAB '                                                  |
| ' LABARATOIRE '                                          |
| ' LABO '                                                 |
| ' LABORATOIRE '                                          |
| ' LABORATOIRES '                                         |
| ' LABORATORI '                                           |
| ' LABORATORIA '                                          |
| ' LABORATORIE '                                          |
| ' LABORATORIES '                                         |
| ' LABORATORIET '                                         |
| ' LABORATORIUM '                                         |
| ' LABORATORY '                                           |
| ' LABRATIORIES '                                         |
| ' LABS '                                                 |
| ' LC '                                                   |
| ' LCC '                                                  |
| ' LDA '                                                  |
| ' LDT '                                                  |
| ' LIIMITED '                                             |
| ' LIMIDADA '                                             |
| ' LIMINTED '                                             |
| ' LIMITADA '                                             |
| ' LIMITADO '                                             |
| ' LIMITATA '                                             |
| ' LIMITE '                                               |
| ' LIMITED '                                              |
| ' LIMITEE '                                              |
| ' LIMTED '                                               |
| ' LINITED '                                              |
| ' LITD '                                                 |
| ' LLC '                                                  |
| ' LLLC '                                                 |
| ' LLLP '                                                 |
| ' LLP '                                                  |
| ' LMITED '                                               |
| ' LP '                                                   |
| ' LT EE '                                                |
| ' LTA '                                                  |
| ' LTC '                                                  |
| ' LTD '                                                  |
| ' LTD: '                                                 |
| ' LTDA '                                                 |
| ' LTDS '                                                 |
| ' LTEE '                                                 |
| ' LTEE; '                                                |
| ' LTS '                                                  |
| ' MAATSCHAPPIJ '                                         |
| ' MANUFACTURE '                                          |
| ' MANUFACTURE D ARTICLES '                               |
| ' MANUFACTURE DE '                                       |
| ' MANUFACTURING '                                        |
| ' MARKETING '                                            |
| ' MASCHINENBAU '                                         |
| ' MASCHINENFABRIK '                                      |
| ' MBH '                                                  |
| ' MBH & CO '                                             |
| ' MERCHANDISING '                                        |
| ' MET BEPERKTE '                                         |
| ' MFG '                                                  |
| ' N A '                                                  |
| ' N V '                                                  |
| ' NA '                                                   |
| ' NAAMLOSE '                                             |
| ' NAAMLOZE '                                             |
| ' NAAMLOZE VENNOOTSCAP '                                 |
| ' NAAMLOZE VENNOOTSHCAP '                                |
| ' NAAMLOZEVENNOOTSCHAP '                                 |
| ' NAUCHNO PRIOZVODSTVENNAYA FIRMA '                      |
| ' NAUCHNO PRIOZVODSTVENNOE OBIEDINENIE '                 |
| ' NAUCHNO PRIOZVODSTVENNY KOOPERATIV '                   |
| ' NAUCHNO PROIZVODSTVENNOE '                             |
| ' NAUCHNO PROIZVODSTVENNOE OBJEDINENIE '                 |
| ' NAUCHNO TEKHNICHESKY KOOPERATIV '                      |
| ' NAUCHNO TEKHNICHESKYKKOOPERATIV '                      |
| ' NAUCHNO TEKHNOLOGICHESKOE '                            |
| ' NAUCHNO TEKHNOLOGICHESKOEPREDPRIYATIE '                |
| ' NAUCHNOPRIOZVODSTVENNOE '                              |
| ' NAUCHNOPROIZVODSTVENNOE '                              |
| ' NAUCHNOTEKHNICHESKYKKOOPERATIV '                       |
| ' NAUCHNOTEKNICHESKY '                                   |
| ' NV '                                                   |
| ' NV SA '                                                |
| ' NV: '                                                  |
| ' NVSA '                                                 |
| ' OBIDINENIE '                                           |
| ' OBIED '                                                |
| ' OBSCHESRYO '                                           |
| ' OBSCHESTVO & OGRANICHENNOI OTVETSTVENNOSTJU '          |
| ' OBSCHESTVO & ORGANICHENNOI OTVETSTVENNOSTIJU '         |
| ' OBSCHESTVO C '                                         |
| ' OBSCHESTVO S '                                         |
| ' OBSCHESTVO S OGRANICHENNOI '                           |
| ' OBSCHESTVO S OGRANICHENNOI OTVETSTVEN NOSTJU '         |
| ' OBSCHESTVO S OGRANICHENNOI OTVETSTVENNOSTIJU '         |
| ' OBSCHESTVO S OGRANICHENNOI OTVETSTVENNPSTJU '          |
| ' OBSCHESTVO S OGRANICHENNOY OTVETSTVENNOSTJU '          |
| ' OBSCHESTVO S OGRANICHENOI '                            |
| ' OBSCHESTVO S ORGANICHENNOI OTVETSTVENNOSTIJU '         |
| ' OBSCHESTVO S ORGANICHENNOI OTVETSTVENNOSTJU '          |
| ' OBSHESTVO S '                                          |
| ' OBSHESTVO S OGRANNICHENNOJ '                           |
| ' OBSHESTVO S ORGANICHENNOI OTVETSTVENNOSTIJU '          |
| ' OBSHESTVO S ORGANICHENNOI OTVETSTVENNOSTJU '           |
| ' OCTROOIBUREAU '                                        |
| ' OGRANICHENNOI OTVETSTVENNOSTIJU '                      |
| ' OGRANICHENNOI OTVETSTVENNOSTIJU FIRMA '                |
| ' OGRANICHENNOI OTVETSTVENNOSTJU '                       |
| ' OGRANICHENNOY OTVETSTVENNOSTYU '                       |
| ' OHG '                                                  |
| ' ONDERNEMING '                                          |
| ' OTVETCTVENNOSTJU '                                     |
| ' OTVETSTVENNOSTIJU '                                    |
| ' OTVETSTVENNOSTJU '                                     |
| ' OTVETSTVENNOSTOU '                                     |
| ' OTVETSTVENNOSTYU '                                     |
| ' OY '                                                   |
| ' OYABLTD '                                              |
| ' OYG '                                                  |
| ' OYI '                                                  |
| ' OYJ '                                                  |
| ' OYL '                                                  |
| ' P '                                                    |
| ' P C '                                                  |
| ' P L C '                                                |
| ' PARNERSHIP '                                           |
| ' PARNTERSHIP '                                          |
| ' PARTNER '                                              |
| ' PARTNERS '                                             |
| ' PARTNERSHIP '                                          |
| ' PATENT OFFICE '                                        |
| ' PATENTVERWALTUNGS GESELLSCHAFT MBH '                   |
| ' PATENTVERWALTUNGSGESELLSCHAFT '                        |
| ' PATENTVERWERTUNGSGESELLSCHAFT '                        |
| ' PATNERSHIP '                                           |
| ' PC '                                                   |
| ' PER AZIONA '                                           |
| ' PERSONENVENNOOTSCHAP MET BE PERKTE AANSPRAKELIJKHEID ' |
| ' PHARM '                                                |
| ' PHARMACEUTICA '                                        |
| ' PHARMACEUTICAL '                                       |
| ' PHARMACEUTICALS '                                      |
| ' PHARMACEUTIQUE '                                       |
| ' PHARMACIA '                                            |
| ' PHARMACIE '                                            |
| ' PHARMACUETICALS '                                      |
| ' PLANTS '                                               |
| ' PLC '                                                  |
| ' PREDPRIVATIE '                                         |
| ' PREDPRIYATIE '                                         |
| ' PREPRIVATIE '                                          |
| ' PRODUCE '                                              |
| ' PRODUCT '                                              |
| ' PRODUCTEURS '                                          |
| ' PRODUCTION '                                           |
| ' PRODUCTIONS '                                          |
| ' PRODUCTIQUE '                                          |
| ' PRODUCTS '                                             |
| ' PRODUITS '                                             |
| ' PRODUKTE '                                             |
| ' PRODUKTER '                                            |
| ' PRODUKTION '                                           |
| ' PRODUKTIONSGESELLSCHAFT '                              |
| ' PRODUKTUTVECKLING '                                    |
| ' PRODURA '                                              |
| ' PRODUTIS '                                             |
| ' PROIZVODSTENNOE OBIEDINENIE '                          |
| ' PROIZVODSTVENNOE '                                     |
| ' PROIZVODSTVENNOE OBIEDINENIE '                         |
| ' PTY '                                                  |
| ' PTY LIM '                                              |
| ' PTYLTD '                                               |
| ' PUBLISHING '                                           |
| ' PVBA '                                                 |
| ' RECHERCHES '                                           |
| ' RESPONSABILITA LIMITATA '                              |
| ' RESPONSABILITA’ LIMITATA '                             |
| ' RESPONSABILITE LIMITE '                                |
| ' RO '                                                   |
| ' RT '                                                   |
| ' S A '                                                  |
| ' S A R L '                                              |
| ' S A RL '                                               |
| ' S COOP '                                               |
| ' S COOP LTDA '                                          |
| ' S NC '                                                 |
| ' S OGRANICHENNOI OTVETSTVENNEST '                       |
| ' S P A '                                                |
| ' S PA '                                                 |
| ' S R L '                                                |
| ' S RL '                                                 |
| ' S S '                                                  |
| ' SA '                                                   |
| ' SA A RL '                                              |
| ' SA RL '                                                |
| ' SA: '                                                  |
| ' SAAG '                                                 |
| ' SAARL '                                                |
| ' SALES '                                                |
| ' SANV '                                                 |
| ' SARL '                                                 |
| ' SARL: '                                                |
| ' SAS '                                                  |
| ' SC '                                                   |
| ' SCA '                                                  |
| ' SCARL '                                                |
| ' SCIETE ANONYME '                                       |
| ' SCOOP '                                                |
| ' SCPA '                                                 |
| ' SCRAS '                                                |
| ' SCRL '                                                 |
| ' SEMPLICE '                                             |
| ' SERIVICES '                                            |
| ' SERVICE '                                              |
| ' SERVICES '                                             |
| ' SHOP '                                                 |
| ' SIMPLIFIEE '                                           |
| ' SL '                                                   |
| ' SNC '                                                  |
| ' SOC '                                                  |
| ' SOC ARL '                                              |
| ' SOC COOOP ARL '                                        |
| ' SOC COOP A RESP LIM '                                  |
| ' SOC COOP A RL '                                        |
| ' SOC COOP R L '                                         |
| ' SOC COOP RL '                                          |
| ' SOC IND COMM '                                         |
| ' SOC RL '                                               |
| ' SOCCOOP ARL '                                          |
| ' SOCCOOPARL '                                           |
| ' SOCIEDAD '                                             |
| ' SOCIEDAD ANONIMA '                                     |
| ' SOCIEDAD ANONIMYA '                                    |
| ' SOCIEDAD INDUSTRIAL '                                  |
| ' SOCIEDAD LIMITADA '                                    |
| ' SOCIEDADE LIMITADA '                                   |
| ' SOCIET CIVILE '                                        |
| ' SOCIETA '                                              |
| ' SOCIETA A '                                            |
| ' SOCIETA A RESPONSABILITA LIMITATA '                    |
| ' SOCIETA ANONIMA '                                      |
| ' SOCIETA CONSORTILE '                                   |
| ' SOCIETA CONSORTILE A RESPONSABILITA '                  |
| ' SOCIETA CONSORTILE ARL '                               |
| ' SOCIETA CONSORTILE PER AZION '                         |
| ' SOCIETA CONSORTILE PER AZIONI '                        |
| ' SOCIETA COOPERATIVA '                                  |
| ' SOCIETA COOPERATIVA A '                                |
| ' SOCIETA IN ACCOMANDITA '                               |
| ' SOCIETA IN ACCOMANDITA SEMPLICE '                      |
| ' SOCIETA IN NOME COLLETTIVO '                           |
| ' SOCIETA INDUSTRIA '                                    |
| ' SOCIETA PER AXIONI '                                   |
| ' SOCIETA PER AZINOI '                                   |
| ' SOCIETA PER AZINONI '                                  |
| ' SOCIETA PER AZIONI '                                   |
| ' SOCIETA PER AZIONI: '                                  |
| ' SOCIETA PER L INDUSTRIA '                              |
| ' SOCIETA PERAZIONI '                                    |
| ' SOCIETAPERAZIONI '                                     |
| ' SOCIETE '                                              |
| ' SOCIETE A '                                            |
| ' SOCIETE A RESPONSABILITE '                             |
| ' SOCIETE A RESPONSABILITE DITE '                        |
| ' SOCIETE A RESPONSABILITEE '                            |
| ' SOCIETE ANANYME '                                      |
| ' SOCIETE ANNOYME '                                      |
| ' SOCIETE ANOMYME '                                      |
| ' SOCIETE ANOMYNE '                                      |
| ' SOCIETE ANONVME '                                      |
| ' SOCIETE ANONYM '                                       |
| ' SOCIETE ANONYME '                                      |
| ' SOCIETE ANOYME '                                       |
| ' SOCIETE CHIMIQUE '                                     |
| ' SOCIETE CIVILE '                                       |
| ' SOCIETE COOPERATIVE '                                  |
| ' SOCIETE D APPLICATIONS GENERALES '                     |
| ' SOCIETE D APPLICATIONS MECANIQUES '                    |
| ' SOCIETE D EQUIPEMENT '                                 |
| ' SOCIETE D ETUDE ET DE CONSTRUCTION '                   |
| ' SOCIETE D ETUDE ET DE RECHERCHE EN VENTILATION '       |
| ' SOCIETE D ETUDES ET '                                  |
| ' SOCIETE D ETUDES TECHNIQUES ET D ENTREPRISES '         |
| ' SOCIETE DE '                                           |
| ' SOCIETE DE CONSEILS DE RECHERCHES ET D APPLICATIONS '  |
| ' SOCIETE DE CONSTRUCTIO '                               |
| ' SOCIETE DE FABRICAITON '                               |
| ' SOCIETE DE FABRICATION '                               |
| ' SOCIETE DE PRODUCTION ET DE '                          |
| ' SOCIETE DES TRANSPORTS '                               |
| ' SOCIETE DITE '                                         |
| ' SOCIETE DITE : '                                       |
| ' SOCIETE DITE: '                                        |
| ' SOCIETE EN '                                           |
| ' SOCIETE EN COMMANDITE '                                |
| ' SOCIETE EN COMMANDITE ENREGISTREE '                    |
| ' SOCIETE EN NOM COLLECTIF '                             |
| ' SOCIETE ETUDES ET '                                    |
| ' SOCIETE ETUDES ET DEVELOPPEMENTS '                     |
| ' SOCIETE GENERALE POUR LES '                            |
| ' SOCIETE GENERALE POUR LES TECHNIQUES NOVELLES '        |
| ' SOCIETE METALLURGIQUE '                                |
| ' SOCIETE NOUVELLE '                                     |
| ' SOCIETE PAR ACTIONS '                                  |
| ' SOCIETE PAR ACTIONS SIMPLIFEE '                        |
| ' SOCIETE PAR ACTIONS SIMPLIFIEE '                       |
| ' SOCIETE TECHNIQUE D APPLICATION ET DE RECHERCHE '      |
| ' SOCIETE TECHNIQUE DE PULVERISATION '                   |
| ' SOCIETEANONYME '                                       |
| ' SOCIETEDITE '                                          |
| ' SOCIETEINDUSTRIELLE '                                  |
| ' SOCRL '                                                |
| ' SOEHNE '                                               |
| ' SOGRANICHENNOI OTVETSTVENNOSTJU '                      |
| ' SOHN '                                                 |
| ' SOHNE '                                                |
| ' SONNER '                                               |
| ' SP '                                                   |
| ' SP A '                                                 |
| ' SP Z OO '                                              |
| ' SP ZOO '                                               |
| ' SPA '                                                  |
| ' SPOKAZOO '                                             |
| ' SPOL '                                                 |
| ' SPOL S R O '                                           |
| ' SPOL S RO '                                            |
| ' SPOL SRO '                                             |
| ' SPOLECNOST SRO '                                       |
| ' SPOLKA Z OO '                                          |
| ' SPOLKA ZOO '                                           |
| ' SPOLS RO '                                             |
| ' SPOLSRO '                                              |
| ' SPRL '                                                 |
| ' SPZ OO '                                               |
| ' SPZOO '                                                |
| ' SR '                                                   |
| ' SR L '                                                 |
| ' SR1 '                                                  |
| ' SRI '                                                  |
| ' SRL '                                                  |
| ' SRO '                                                  |
| ' SßRL '                                                 |
| ' SURL '                                                 |
| ' TEAM '                                                 |
| ' TECHNIQUES NOUVELLE '                                  |
| ' TECHNOLOGIES '                                         |
| ' THE FIRM '                                             |
| ' TOHO BUSINESS '                                        |
| ' TOVARISCHESIVO S OGRANICHENNOI OIVETSIVENNOSTIJU '     |
| ' TOVARISCHESTVO '                                       |
| ' TOVARISCHESTVO S OGRANICHENNOI '                       |
| ' TOVARISCHESTVO S OGRANICHENNOI OTVETSTVENNOSTJU '      |
| ' TOVARISCHESTVO S OGRANICHENNOI OTVETSVENNOSTJU '       |
| ' TOVARISCHESTVO S ORGANICHENNOI OTVETSTVENNOSTJU '      |
| ' TOVARISCHETSTVO S ORGANICHENNOI '                      |
| ' TRADING '                                              |
| ' TRADING AS '                                           |
| ' TRADING UNDER '                                        |
| ' UGINE '                                                |
| ' UNTERNEHMEN '                                          |
| ' USA '                                                  |
| ' USINES '                                               |
| ' VAKMANSCHAP '                                          |
| ' VENNOOTSCHAP '                                         |
| ' VENNOOTSCHAP ONDER FIRMA: '                            |
| ' VENNOOTSHAP '                                          |
| ' VENNOTSCHAP '                                          |
| ' VENOOTSCHAP '                                          |
| ' VENTURE '                                              |
| ' VERARBEITUNG '                                         |
| ' VERKOOP '                                              |
| ' VERSICHERUNGSBUERO '                                   |
| ' VERTRIEBSGESELLSCHAFT '                                |
| ' VOF '                                                  |
| ' WERK '                                                 |
| ' WERKE '                                                |
| ' WERKEN '                                               |
| ' WERKHUIZEN '                                           |
| ' WERKS '                                                |
| ' WERKSTAETTE '                                          |
| ' WERKSTATT '                                            |
| ' WERKZEUGBAU '                                          |
| ' WINKEL '                                               |
| ' WORKS '                                                |
| ' YUGEN KAISHA '                                         |
| ' YUGENKAISHA '                                          |
| ' YUUGEN KAISHA '                                        |
| ' YUUGENKAISHA '                                         |
| ' ZOO '                                                  |


*** Individuals
:PROPERTIES:
:ID:       org:480k6q51nki0
:END:
- code :: "indiv"

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Detect Individuals (Non-Corporates group)
  ##'
  ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
  ##' 
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.detect.indiv <- function(x
                                 , codes.name = "entity.type"
                                 , x.codes.merge = TRUE
                                 , ...) {
    harmonize.detect(x
                   , codes.name = codes.name
                   , x.codes.merge = x.codes.merge
                   , patterns = cockburn.patterns.indiv
                   , codes = "indiv"
                   , return.only.first.detected.code = TRUE
                   , ...)
  }

  ## test
  ## c(" DR VLASOV "
  ## , " S.VLASOV PHD "
  ## , "LEGALY REPRESENTED BY STAS") %>%
  ## cockburn.detect.indiv

    ## c(" DR VLASOV "
    ## , " S.VLASOV PHD "
    ## , " STANICA LEGALY REPRESENTED BY STAS"
    ## , " DR VLASOV & BROTHER "
    ## , "MSlab & C"
    ## , "LEGALY REPRESENTED BY STAS"
    ## , " REPUBLIC LEGALY REPRESENTED BY STAS"
    ## , " TILBURG UNIVERSTIY "
    ## , " VU UNIVERSTITAET "
    ## , " FUNDATION LEGALY REPRESENTED BY STAS") %>%
    ##   cockburn.detect.indiv %>%
    ##   cockburn.detect.govt %>%
    ##   cockburn.detect.indiv
#+END_SRC

**** table - cockburn.patterns.indiv
#+call: make-rds-patterns-table(data = cockburn.patterns.indiv, data.name = "cockburn.patterns.indiv")

#+name: cockburn.patterns.indiv
| ' GEB '                       |
| ' DECEASED '                  |
| ' DECEDE '                    |
| ' DESEASED '                  |
| ' DIPL '                      |
| ' DIPL BETRIEBSWIRT '         |
| ' DIPL CHEM '                 |
| ' DIPL GEOGR '                |
| ' DIPL ING '                  |
| ' DIPL ING '                  |
| ' DIPL PHYS '                 |
| ' DIPL PHYS '                 |
| ' DIPL WIRTSCH ING '          |
| ' DOTT ING '                  |
| ' DR '                        |
| ' EPOSE '                     |
| ' EPOUSE '                    |
| ' EPSE '                      |
| ' GEBOREN '                   |
| ' GEBORENE '                  |
| ' GES VERTRETEN DURCH '       |
| ' GRAD '                      |
| ' HERITIERE '                 |
| ' ING '                       |
| ' ING GRAD '                  |
| ' ING DIPL '                  |
| ' JR '                        |
| ' LA SUCCESSION '             |
| ' LEGAL '                     |
| ' LEGALLY REPR '              |
| ' LEGALLY REPRESENTED '       |
| ' LEGALY REPRESENTED BY '     |
| ' NEE '                       |
| ' PHD '                       |
| ' PROF '                      |
| ' REPRESENTATIVE OF '         |
| ' REPRESENTEE PAR SON LEGAL ' |
| ' VERSTORBEN '                |
| ' VERSTORBEN ERFINDERS '      |
| ' VERSTORBENEN ERFINDERS '    |
| ' VERTRETEN DURCH '           |

*** Government
:PROPERTIES:
:ID:       org:r46k6q51nki0
:END:
- code :: "govt"

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Detect Goverment Organizations (Non-Corporates group)
  ##'
  ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
  ##' 
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.detect.govt <- function(x
                                 , codes.name = "entity.type"
                                 , x.codes.merge = TRUE 
                                 , ...) {
    harmonize.detect(x
                   , codes.name = codes.name
                   , x.codes.merge = x.codes.merge
                   , patterns = cockburn.patterns.govt
                   , codes = "govt"
                   , return.only.first.detected.code = TRUE
                   , ...)
  }

  ## test
  ## c(" DR VLASOV "
  ## , " S.VLASOV PHD "
  ## , " REPUBLIC LEGALY REPRESENTED BY STAS") %>%
  ## cockburn.detect.govt


  ##' Cleanup Goverment Organizations (Non-Corporates group)
  ##'
  ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
  ##' 
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.replace.govt <- function(x, ...) {
      harmonize.replace(x
                      , patterns = cockburn.patterns.govt.cleanup
                      , ...)
  }


  ## test
  ## " VERY IMPORTANT SEC OF THE DEPT OF  " %>% cockburn.replace.govt
#+END_SRC

**** table - cockburn.patterns.govt

#+call: make-rds-patterns-table(data = cockburn.patterns.govt, data.name = "cockburn.patterns.govt")

#+name: cockburn.patterns.govt
| ' NAT RES COUNCIL '                       |
| ' NAT RES INST '                          |
| ' NAT SCI COUNCIL '                       |
| ' NAT SCI INST '                          |
| ' AGENCY '                                |
| ' STATE OF '                              |
| ' US ADMIN '                              |
| ' ADMINISTRATOR '                         |
| ' COMMISSIONER OF PATENTS '               |
| ' US DEPT '                               |
| ' US SEC '                                |
| ' UK SEC FOR '                            |
| ' UK '                                    |
| ' COMMONWEALTH '                          |
| ' MIN OF '                                |
| ' MIN FOR '                               |
| ' LETAT FR REPRESENTE '                   |
| ' LA POSTE '                              |
| ' ADMINISTRATOR '                         |
| ' AGENCE '                                |
| ' AGENCY '                                |
| ' AMMINISTRAZIONE '                       |
| ' AMMINISTRAZIONE '                       |
| ' AUTHORITY '                             |
| ' BOTANICAL GARDEN '                      |
| ' BUNDESANSTALT '                         |
| ' BUNDESREPUBLIK '                        |
| ' CHAMBRE '                               |
| ' CITY '                                  |
| ' COMISSARIAT '                           |
| ' COMMISARIAT '                           |
| ' COMMISSARAIT '                          |
| ' COMMISSARAT '                           |
| ' COMMISSARIAT '                          |
| ' COMMISSARIET '                          |
| ' COMMISSION '                            |
| ' COMMISSRIAT '                           |
| ' COMMONWEALTH '                          |
| ' COMMUNAUTE '                            |
| ' CONFEDERATED TRIBES '                   |
| ' COOUNCIL OF '                           |
| ' COUCIL OF '                             |
| ' COUNCIL '                               |
| ' COUNSEL OF '                            |
| ' COUNTY '                                |
| ' DEN PRAESIDENTEN '                      |
| ' DEPARTMENT OF AGRICULTURE '             |
| ' DETAT '                                 |
| ' ETAT '                                  |
| ' GERMANY '                               |
| ' GEZONDHEIDSDIENST '                     |
| ' GOUVERNEMENT '                          |
| ' GOUVERNMENT '                           |
| ' GOVERNER '                              |
| ' GOVERNMENT '                            |
| ' GOVERNOR '                              |
| ' HER MAJESTY '                           |
| ' KEN '                                   |
| ' LETAT '                                 |
| ' MINISTER '                              |
| ' MINISTERO '                             |
| ' MINISTRE '                              |
| ' MINISTRI '                              |
| ' MINISTRO '                              |
| ' MINISTRY '                              |
| ' MUNICIPAL UTILITY DISTRICT '            |
| ' NACIONAL '                              |
| ' NATIONAL '                              |
| ' NAZIONALE '                             |
| ' POLICE '                                |
| ' PREFECTURE '                            |
| ' PRESIDENZA DEL CONSIGLIO DEI MINISTRI ' |
| ' PRESIDENZADEL CONSIGLIO DEL MINISTRI '  |
| ' REPUBLIC '                              |
| ' RESEARCH COUNCIL '                      |
| ' SECRETARIAT '                           |
| ' SECRETARY '                             |
| ' STAAT '                                 |
| ' STADT '                                 |
| ' STATE '                                 |
| ' STATO '                                 |
| ' THE QUEEN '                             |
| ' VILLE '                                 |
| ' CNRS '                                  |
| ' CENT NAT DE LA RECH '                   |
| ' CENT NAT DETUDES SPATIALES '            |
| ' DESY '                                  |

**** table - cockburn.patterns.govt.cleanup


#+call: make-rds-patterns-table(data = cockburn.patterns.govt.cleanup, data.name = "cockburn.patterns.govt.cleanup")

#+name: cockburn.patterns.govt.cleanup
| pattern                | replacement |
|------------------------+-------------|
| ' SEC OF DEPT OF '     | ' DEPT OF ' |
| ' SEC OF THE DEPT OF ' | ' DEPT OF ' |


*** Universities
:PROPERTIES:
:ID:       org:zdck6q51nki0
:END:
- code :: "univ"

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
    ##' Detect Universities (Non-Corporates group)
    ##'
    ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
    ##' 
    ##' @param x vector or table
    ##' @inheritDotParams harmonize.detect
    ##' @return Harmonized table
    ##' 
    ##' @md 
    ##' @export 
    cockburn.detect.univ <- function(x
                                   , codes.name = "entity.type"
                                   , x.codes.merge = TRUE 
                                   , ...) {
      harmonize.detect(x
                     , codes.name = codes.name
                     , x.codes.merge = x.codes.merge
                     , patterns = cockburn.patterns.univ
                     , codes = "univ"
                     , return.only.first.detected.code = TRUE
                     , ...)
    }

    ## test
    ## c(" TILBURG UNIVERSTIY "
    ## , " VU UNIVERSTITAET "
    ## , "LEGALY REPRESENTED BY STAS") %>%
    ## cockburn.detect.univ


    ##' Cleanup Universities (Non-Corporates group)
    ##'
    ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
    ##' 
    ##' @param x vector or table
    ##' @inheritDotParams harmonize.detect
    ##' @return Harmonized table
    ##' 
    ##' @md 
    ##' @export 
    cockburn.replace.univ <- function(x, ...) {
        harmonize.replace(x
                        , patterns = cockburn.patterns.univ.cleanup
                        , ...)
    }

    ## test
    ## c(" SUPERVISORS OF THE TILBURG UNIVERSTIY "
    ## , " VU UNIVERSTITAET "
    ## , "LEGALY REPRESENTED BY STAS") %>%
    ## cockburn.replace.univ
#+END_SRC

**** table - universities
#+call: make-rds-patterns-table(data = cockburn.patterns.univ, data.name = "cockburn.patterns.univ")

#+name: cockburn.patterns.univ
| ' ACADEM'                   |
| ' ACAD '                    |
| ' AKAD '                    |
| ' COLLEGE '                 |
| ' CURATORS '                |
| ' ECOLE '                   |
| ' FACULTE '                 |
| ' INST OF TECH '            |
| ' INST OF TECH'             |
| ' INSTITUTE OF TECHNOLOGY ' |
| ' INTERNUIVERSITAIR '       |
| ' INTERUNIVERITAIR '        |
| ' POLITEC '                 |
| ' POLYTEC '                 |
| ' REGENTS '                 |
| ' RIJKSUNIVERSTTEIT '       |
| ' SCHOOL '                  |
| ' SCHULE '                  |
| ' SUPERVISORS '             |
| ' TRUSTEES '                |
| ' UMIVERSIDAD '             |
| ' UNIV '                    |
| ' UNIVERISITY '             |
| ' UNIVERISTY '              |
| ' UNIVERSATIES '            |
| ' UNIVERSI'                 |
| ' UNIVERSTIA '              |
| ' UNIVERSTITAT '            |
| ' UNIVERSTITAET '           |
| ' UNIVERSTITY '             |
| ' UNIVERSTIY '              |
| ' UNIVERSY '                |
| ' UNIVERZ '                 |
| ' UNVERSITY '               |
| ' KU LEUVEN '               |

**** table - clean up university names
#+call: make-rds-patterns-table(data = cockburn.patterns.univ.cleanup, data.name = "cockburn.patterns.univ.cleanup")

#+name: cockburn.patterns.univ.cleanup
| pattern                         | replacement |
|---------------------------------+-------------|
| ' BOARD OF REGENTS OF THE '     | ' '         |
| ' BOARD OF REGENTS OF '         | ' '         |
| ' BOARD OF REGENTS '            | ' '         |
| ' REGENTS OF THE '              | ' '         |
| ' REGENTS OF '                  | ' '         |
| ' REGENTS '                     | ' '         |
| ' BOARD OF TRUSTEES OF THE '    | ' '         |
| ' BOARD OF TRUSTEES OF '        | ' '         |
| ' BOARD OF TRUSTEES OPERATING ' | ' '         |
| ' BOARD OF TRUSTEES '           | ' '         |
| ' TRUSTEES OF THE '             | ' '         |
| ' TRUSTEES OF '                 | ' '         |
| ' TRUSTEES '                    | ' '         |
| ' BOARD OF SUPERVISORS OF THE ' | ' '         |
| ' BOARD OF SUPERVISORS OF '     | ' '         |
| ' BOARD OF SUPERVISORS '        | ' '         |
| ' SUPERVISORS OF THE '          | ' '         |
| ' SUPERVISORS OF '              | ' '         |
| ' SUPERVISORS '                 | ' '         |
| ' BOARD OF GOVERNORS OF THE '   | ' '         |
| ' BOARD OF GOVERNORS OF '       | ' '         |
| ' BOARD OF GOVERNORS '          | ' '         |
| ' GOVERNORS OF THE '            | ' '         |
| ' GOVERNORS OF '                | ' '         |
| ' GOVERNORS '                   | ' '         |
| ' CURATORS OF THE '             | ' '         |
| ' CURATORS '                    | ' '         |
| ' THE '                         | ' '         |


*** Non-profit institutes
:PROPERTIES:
:ID:       org:owhk6q51nki0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
    ##' Detect Non-profit Institutes (Non-Corporates group)
    ##'
    ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
    ##' 
    ##' @param x vector or table
    ##' @inheritDotParams harmonize.detect
    ##' @return Harmonized table
    ##' 
    ##' @md 
    ##' @export 
    cockburn.detect.inst <- function(x
                                   , codes.name = "entity.type"
                                   , x.codes.merge = TRUE 
                                   , ...) {
      harmonize.detect(x
                     , codes.name = codes.name
                     , x.codes.merge = x.codes.merge
                     , patterns = cockburn.patterns.inst
                     , codes = "inst"
                     , return.only.first.detected.code = TRUE
                     , ...)
    }

    ## test
    ## c(" DR VLASOV "
    ## , " S.VLASOV PHD "
    ## , " FUNDATION LEGALY REPRESENTED BY STAS") %>%
    ## cockburn.detect.inst

#+END_SRC

**** table - cockburn.patterns.inst

#+call: make-rds-patterns-table(data = cockburn.patterns.inst, data.name = "cockburn.patterns.inst")

#+name: cockburn.patterns.inst
| ' RESEARCH COUNCIL '               |
| ' RES COUNCIL '                    |
| ' FRAUNHOFER GES '                 |
| ' MAX PLANCK GES '                 |
| ' ASBL '                           |
| ' ASOCIACION '                     |
| ' ASSOCIATION '                    |
| ' ASSOCIAZIONE '                   |
| ' BLOOD '                          |
| ' BLOOD CENTER '                   |
| ' BLOOD SERVICES '                 |
| ' BLOOD TRANSFUSION SERVICE '      |
| ' CHURCH '                         |
| ' COOPERATIVE '                    |
| ' E V '                            |
| ' EV '                             |
| ' FEDERATION '                     |
| ' FONDATION '                      |
| ' FONDATIONE '                     |
| ' FOUNDATION '                     |
| ' FORSKNINGSINSTITUT '             |
| ' FUNDACAO '                       |
| ' FUNDACIO '                       |
| ' FUNDACION '                      |
| ' FUNDATION '                      |
| ' INDUSTRIAL TECHNOLOGY RESEARCH ' |
| ' INSITUT '                        |
| ' INSITUTE '                       |
| ' INSTIT '                         |
| ' INSTYTUT '                       |
| ' INSTYTUT '                       |
| ' INTITUTE '                       |
| ' ISTITUTO '                       |
| ' KENKYUSHO '                      |
| ' MINISTRIES '                     |
| ' SOCIETY '                        |
| ' STICHTING '                      |
| ' STIFTELSE '                      |
| ' STIFTUNG '                       |
| ' TRANSFUSION '                    |
| ' TRANSFUSION SANGUINE '           |
| ' TRUST '                          |
| ' VERENINING '                     |
| ' VZW '                            |

**** Complex conditions
:PROPERTIES:
:ID:       org:ajok6q51nki0
:END:

| pattern        | condition                            |
|----------------+--------------------------------------|
| ' COUNCIL OF ' | >0 & strpos(standard_name," RES ")>0 |
| ' FOUND '      | ~=0 & asstype~="univ"                |
| ' INST '       | >0 & asstype~="univ"                 |

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Detects Non-profit institutes with special conditions
  ##'
  ##' @param x table. Expected that x has a column with codes for universities
  ##' @param codes.col column with codes for universities ("univ"). Default is last column of x
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @export
  cockburn.detect.inst.conds.1 <- function(x
                                         , codes.name = "entity.type"
                                         , x.codes.merge = TRUE
                                         , ...) {
      ## STATA equvalent
      ## replace asstype = "inst" if strpos(standard_name," COUNCIL OF ")>0 & strpos(standard_name," RES ")>0
      harmonize.detect(x
                     , patterns = " COUNCIL OF .* RES | RES .* COUNCIL OF "
                     , patterns.type = "regex"
                     , codes = "inst"
                     , codes.name = codes.name
                     , x.codes.merge = x.codes.merge
                     , return.only.first.detected.code = TRUE
                     , ...)
          }


  ##' Detects Non-profit institutes with special conditions
  ##'
  ##' @param x table. Expected that x has a column with codes for universities
  ##' @param codes.col column with codes for universities ("univ"). Default is last column of x
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @export
  cockburn.detect.inst.conds.2 <- function(x
                                         , codes.name = "entity.type"
                                         , x.codes.merge = TRUE
                                         , ...) {
      ## STATA equvalent
      ## replace asstype = "inst" if strpos(standard_name," FOUND ")~=0 & asstype~="univ"
      ## assume a bug: " FOUND ")~=0 -> " FOUND ")>0
      ## replace asstype = "inst" if strpos(standard_name," INST ")>0 & asstype~="univ"
      codes <- harmonize.x(x, x.col = codes.name, ...)
      conds <- codes %>%
          lapply(equals, "univ") %>% 
          sapply(any, na.rm = TRUE) %>%
          not
      x.vec <- harmonize.x(x, ...)
      coded <- harmonize.detect(x = data.table(x.vec, codes)
                              , patterns = c(" FOUND "
                                           , " INST ")
                              , x.rows = conds
                              , codes = "inst"
                              , x.codes.merge = x.codes.merge
                              , return.only.first.detected.code = TRUE
                              , return.only.codes = TRUE)
      harmonize.x.dots(x, coded, x.col = codes.name
                     , x.col.update = TRUE)
  }




  ##' Detects Non-profit institutes with special conditions
  ##'
  ##' @param x table. Expected that x has a column with codes for universities
  ##' @param codes.col column with codes for universities ("univ"). Default is last column of x
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @export
  cockburn.detect.inst.conds <- function(x
                                       , x.codes.merge = TRUE
                                       , codes.name = "entity.type"
                                       , ...) {
    x %>% 
      cockburn.detect.inst.conds.1(x.codes.merge = x.codes.merge
                                 , codes.name = codes.name) %>%
      cockburn.detect.inst.conds.2(codes.name = codes.name
                                 , x.codes.merge = x.codes.merge) %>%
      return()
  }

#+END_SRC

#+BEGIN_SRC R :tangle no
   ## tests
  data.table(org = c(" EVIL FOUND OF BIG CORP "
                   , " EVIL FOUND OF BIG CORP "
                   , " INT INST OF MAGIC"
                   , " COUNCIL OF PARANORMAL RES & DEV "
                   , " COUNCIL OF GROWN UP KIDS ")
           , entity.type = list(c("univ", "gov"), NA, "univ", NA, "gov")) %>%
  cockburn.detect.inst.conds.2

  data.table(name = c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
                    , "MSLab CÖ. <a href=lsdldf> <br> <\\a>"
                    , "MSLab Co."
                    , "MSLaeb Comp."
                    , " COUNCIL OF PARANORMAL RES & DEV "
                    , "MSLab Comp. Ltd."
                    , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ") %>% rep(20)
           , foo = "I love coffee" ) %>%
    cockburn.detect.inst.conds(x.codes.merge = TRUE)

  data.table(org = c(" DR VLASOV "
                   , " S.VLASOV PHD "
                   , " STANICA LEGALY REPRESENTED BY STAS"
                   , " DR VLASOV & BROTHER "
                   , "MSlab & C"
                   , "LEGALY REPRESENTED BY STAS"
                   , " REPUBLIC LEGALY REPRESENTED BY STAS"
                   , " TILBURG UNIVERSTIY "
                   , " VU UNIVERSTITAET "
                   , " FUNDATION LEGALY REPRESENTED BY STAS")
           , entity.type = list(c("univ", "gov"), NA, "univ", NA, "gov")) %>%
    cockburn.detect.inst.conds


#+END_SRC

**** German Non-profit institutes
:PROPERTIES:
:ID:       org:vxuk6q51nki0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
      ##' Detects German Non-profit institutes
      ##'
      ##' "EINGETRAGENER VEREIN. NON PROFIT SOCIETY/ASSOCIATION."
      ##' 
      ##' @param x table
      ##' @inheritDotParams harmonize.detect
      ##' @return Harmonized table
      ##' 
      ##' @md 
      ##' @export 
      cockburn.detect.inst.german <- function(x
                                     , codes.name = "entity.type"
                                     , x.codes.merge = TRUE 
                                     , ...) {
        conds <- harmonize.detect(x, patterns = c(" UNIV "
                                                , " GMBH "
                                                , " KGAA "
                                                , " KG "
                                                , " AG "
                                                , " EG "
                                                , " OHG ")
                                , codes = TRUE
                                , return.only.first.detected.code = TRUE
                                , return.only.codes = TRUE) %>%
            unlist %>% sapply(isTRUE) %>% not
        harmonize.detect(x, patterns = c(" STIFTUNG "
                                       , " EINGETRAGENER VEREIN ")
                       , codes.name = codes.name
                       , x.codes.merge = x.codes.merge
                       , x.rows = conds
                       , codes = "inst"
                       , return.only.first.detected.code = TRUE
                       , ...)
      }

#+END_SRC

#+BEGIN_SRC R :results none :session :tangle no :eval no-export
      ## Test
      c(" EINGETRAGENER VEREIN UNIV "
      , " BERLIN EINGETRAGENER VEREIN "
      , " STIFTUNG ") %>% 
          cockburn.detect.inst.german
#+END_SRC


*** Hospitals
:PROPERTIES:
:ID:       org:pk0l6q51nki0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Detect Hospitals (Non-Corporates group)
  ##'
  ##' From non_corporates.do file. Source - https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded
  ##' 
  ##' @param x vector or table
  ##' @inheritDotParams harmonize.detect
  ##' @return Harmonized table
  ##' 
  ##' @md 
  ##' @export 
  cockburn.detect.hosp <- function(x
                                 , codes.name = "entity.type"
                                 , x.codes.merge = TRUE 
                                 , ...) {
    harmonize.detect(x
                   , codes.name = codes.name
                   , x.codes.merge = x.codes.merge
                   , patterns = cockburn.patterns.hosp
                   , codes = "hosp"
                   , return.only.first.detected.code = TRUE
                   , ...)
  }




  ## test
  ## c(" DR VLASOV "
  ## , " S.VLASOV PHD "
  ## , " STANICA LEGALY REPRESENTED BY STAS") %>%
  ##     cockburn.detect.hosp


#+END_SRC

**** table - cockburn.patterns.hosp
#+call: make-rds-patterns-table(data = cockburn.patterns.hosp, data.name = "cockburn.patterns.hosp")

#+name: cockburn.patterns.hosp
| ' AMTS SYGEHUS '        |
| ' AMTSSYGEHUS '         |
| ' BOLNHITSA '           |
| ' BOLNISN '             |
| ' BOLNITSA '            |
| ' BOLNYITSA '           |
| ' CENTRE '              |
| ' CLINIC '              |
| ' CLINICA '             |
| ' CLINIQUE '            |
| ' HAIGLA '              |
| ' HOPITAL '             |
| ' HOPITAUX '            |
| ' HOPSITAL '            |
| ' HOSITAL '             |
| ' HOSP '                |
| ' HOSPIDAL '            |
| ' HOSPITAL '            |
| ' HOSPITALARIO '        |
| ' HOSPITALET '          |
| ' HOSPITAUX '           |
| ' KESKUSSAIRAALA '      |
| ' KLIINIK '             |
| ' KLINIK '              |
| ' KLINIKA '             |
| ' KLINIKKA '            |
| ' KLINIKUM '            |
| ' KORHAZ '              |
| ' KRANKENHAUS '         |
| ' LHOSPTALET '          |
| ' LIGONINE '            |
| ' MEDICAL CENTER '      |
| ' NEMOCNICA '           |
| ' NEMOCNICE '           |
| ' NOSOCOMIO '           |
| ' NOSOKOMIO '           |
| ' OSPEDALE '            |
| ' OSPETALE '            |
| ' OSPITALIERI '         |
| ' POLICLINICA '         |
| ' POLICLINICO '         |
| ' POLIKLINIK '          |
| ' SAIRAALA '            |
| ' SJUKHUS '             |
| ' SJUKHUSET '           |
| ' SLIMNICA '            |
| ' SPITAL '              |
| ' STACIONARS '          |
| ' STANICA '             |
| ' STREDISKO '           |
| ' SYGEHUS '             |
| ' SYGEHUSET '           |
| ' SYKEHUS '             |
| ' SZPITAL '             |
| ' UNIVERSITAETSKLINIK ' |
| ' ZIEKENHUIS '          |
| ' CITY OF HOPE '        |


** Punctuation
:PROPERTIES:
:ID:       org:ehachlb1cgi0
:END:
Following funciton removes punctuation and standardise some symbols. Implementation of punctuation2.do from  https://sites.google.com/site/patentdataproject/Home/posts/namestandardizationroutinesuploaded

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Removes punctuation and standardise some symbols. 
  ##'
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @import magrittr
  ##' @export 
  cockburn.replace.punctuation <- function(x
                                           , ...) {
    x %>%
      harmonize.replace(patterns = cockburn.patterns.punctuation.and, ...) %>%
      harmonize.replace(patterns = cockburn.patterns.punctuation.the
                      , patterns.type.col = 3, ...) %>%
      ## I swapted patstat with amadeus otherwise Ã²Ã¢ÃªÃ®Ã© will not become oaeie
      harmonize.replace(patterns = cockburn.patterns.punctuation.patstat, ...) %>% 
      harmonize.replace(patterns = cockburn.patterns.punctuation.amadeus, ...) %>%
      harmonize.replace(patterns = cockburn.patterns.punctuation.char, ...)
  }

  ## Test
  ## c("WESTINGHOUSE, |.?^&*@ ELEC  "
  ## , "GRACE (W EN R) & CO - Ã²Ã¢ÃªÃ®Ã©"
  ## , "GRACE (W/R) & CO Ltd.") %>% 
  ##   cockburn.replace.punctuation
#+END_SRC

*** table - & (EPO Espace)

#+call: make-rds-patterns-table(data = cockburn.patterns.punctuation.and, data.name = "cockburn.patterns.punctuation.and")

#+name: cockburn.patterns.punctuation.and
| pattern | replacement |
|---------+-------------|
| '&AMP;' | ' & '       |
| '+'     | ' & '       |
| ' AND ' | ' & '       |
| ' ET '  | ' & '       |
| ' UND ' | ' & '       |
| '&'     | ' & '       |

*** table - the (British)

#+call: make-rds-patterns-table(data = cockburn.patterns.punctuation.the, data.name = "cockburn.patterns.punctuation.the")

#+name: cockburn.patterns.punctuation.the
| pattern | replacement | type   |
|---------+-------------+--------|
| '(THE)' | ''          | ends   |
| 'THE '  | ''          | begins |


ISO8859-1 (AMADEUS)

#+BEGIN_SRC emacs-lisp
   ;; (insert-char '#10r192) 
  (char-to-string 192)
#+END_SRC


*** table - Accented characters - AMADEUS

#+call: make-rds-patterns-table(data = cockburn.patterns.punctuation.amadeus, data.name = "cockburn.patterns.punctuation.amadeus")

#+name: cockburn.patterns.punctuation.amadeus
| pattern | replacement | codepoint |
|---------+-------------+-----------|
| À       | A           |       192 |
| Á       | A           |       193 |
| Â       | A           |       194 |
| Ã       | A           |       195 |
| Ä       | AE          |       196 |
| Å       | A           |       197 |
| Æ       | AE          |       198 |
| Ç       | C           |       199 |
| È       | E           |       200 |
| É       | E           |       201 |
| Ê       | E           |       202 |
| Ë       | E           |       203 |
| Ì       | I           |       204 |
| Í       | I           |       205 |
| Î       | I           |       206 |
| Ï       | I           |       207 |
| Ð       | D           |       208 |
| Ñ       | N           |       209 |
| Ò       | O           |       210 |
| Ó       | O           |       211 |
| Ô       | O           |       212 |
| Õ       | O           |       213 |
| Ö       | OE          |       214 |
| Ø       | O           |       216 |
| Ù       | U           |       217 |
| Ú       | U           |       218 |
| Û       | U           |       219 |
| Ü       | UE          |       220 |
| Ý       | Y           |       221 |
| ß       | SS          |       223 |
| à       | a           |       224 |
| á       | a           |       225 |
| â       | a           |       226 |
| ã       | a           |       227 |
| ä       | ae          |       228 |
| å       | a           |       229 |
| æ       | ae          |       230 |
| ç       | c           |       231 |
| è       | e           |       232 |
| é       | e           |       233 |
| ê       | e           |       234 |
| ë       | e           |       235 |
| ì       | i           |       236 |
| í       | i           |       237 |
| î       | i           |       238 |
| ï       | i           |       239 |
| ð       | o           |       240 |
| ñ       | n           |       241 |
| ò       | o           |       242 |
| ó       | o           |       243 |
| ô       | o           |       244 |
| õ       | o           |       245 |
| ö       | oe          |       246 |
| ø       | o           |       248 |
| ù       | u           |       249 |
| ú       | u           |       250 |
| û       | u           |       251 |
| ü       | ue          |       252 |
| ý       | y           |       253 |
| ÿ       | y           |       255 |
#+TBLFM: $1='(char-to-string $>);N


*** table - Accented characters - EPO PATSTAT

#+call: make-rds-patterns-table(data = cockburn.patterns.punctuation.patstat, data.name = "cockburn.patterns.punctuation.patstat")

#+name: cockburn.patterns.punctuation.patstat
| pattern | replacement | code1 | code2 | name                     |
|---------+-------------+-------+-------+--------------------------|
| Ã       | a           |   195 |   160 | a grave                  |
| Ã¡      | a           |   195 |   161 | a acute                  |
| Ã   | A           |   195 |   128 | A acute                  |
| Ã²      | o           |   195 |   178 | Some sort of o (Italian) |
| Ã¢      | a           |   195 |   162 | a circumflex             |
| Ãª      | e           |   195 |   170 | e circumflex             |
| Ã®      | i           |   195 |   174 | i circumflex             |
| Ã©      | e           |   195 |   169 | e acute                  |
| Ã   | E           |   195 |   137 | E acute                  |
| Ã¨      | e           |   195 |   168 | e grave                  |
| Ã§      | c           |   195 |   167 | c cedilla                |
| Ã   | E           |   195 |   139 | E umlaut                 |
| Ã¤      | ae          |   195 |   164 | a umlaut                 |
| Ã¶      | oe          |   195 |   182 | o umlaut                 |
| Ã¼      | ue          |   195 |   188 | u umlaut                 |
| Ã   | AE          |   195 |   132 | A umlaut                 |
| Ã   | OE          |   195 |   150 | O umlaut                 |
| Ã   | UE          |   195 |   156 | U umlaut                 |
| Ã   | N           |   195 |   145 | N tilde                  |
| Ã±      | n           |   195 |   177 | n tilde                  |
#+TBLFM: $1='(concat (char-to-string $3) (char-to-string $4));N

*** table - strips out all punctuation characters

#+call: make-rds-patterns-table(data = cockburn.patterns.punctuation.char, data.name = "cockburn.patterns.punctuation.char")

#+name: cockburn.patterns.punctuation.char
| pattern  | replacement |
|----------+-------------|
| '''      | ''          |
| ';'      | ''          |
| '^'      | ''          |
| '<'      | ''          |
| '.'      | ''          |
| '`'      | ''          |
| '_'      | ''          |
| '>'      | ''          |
| ''''     | ''          |
| '!'      | ''          |
| '+'      | ''          |
| '?'      | ''          |
| '('      | ''          |
| '£'      | ''          |
| '{'      | ''          |
| '\'      | ''          |
| ')'      | ''          |
| '$'      | ''          |
| '}'      | ''          |
| ' \vert' | ''          |
| ','      | ''          |
| '%'      | ''          |
| '['      | ''          |
| '¦'      | ''          |
| '*'      | ''          |
| ']'      | ''          |
| '/'      | ' '         |
| '@'      | ''          |
| ':'      | ''          |
| '~'      | ''          |
| '#'      | ''          |
| '-'      | ' '         |




** Standard Name
:PROPERTIES:
:ID:       org:tnnchlb1cgi0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Create standard name
  ##'
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @import magrittr
  ##' @export 
  cockburn.replace.standard.names <- function(x
                                              , ...) {
    x %>%
      cockburn.replace.derwent(...) %>% 
      harmonize.replace(patterns = cockburn.patterns.standard.names.additional, ...) %>% 
      harmonize.replace(patterns = cockburn.patterns.standard.names.country.specific, ...)
  }

#+END_SRC

#+BEGIN_SRC R :results none :session :tangle no :eval no-export
  ## Test
  c("WESTINGHOUSE, |.?^&*@ ELEC  "
  , "GRACE (W EN R) & CO - Ã²Ã¢ÃªÃ®Ã©  PUBLIC LIMITED "
  , "GRACE (W/R) & CO LTD ") %>% 
   cockburn.replace.standard.names
#+END_SRC


*** table - additional changes

#+call: make-rds-patterns-table(data = cockburn.patterns.standard.names.additional, data.name = "cockburn.patterns.standard.names.additional")

#+name: cockburn.patterns.standard.names.additional
| pattern        | replacement |
|----------------+-------------|
| ' RES & DEV '  | ' R&D '     |
| ' RECH & DEV ' | ' R&D '     |

*** table - country specific work

#+call: make-rds-patterns-table(data = cockburn.patterns.standard.names.country.specific, data.name = "cockburn.patterns.standard.names.country.specific")

#+name: cockburn.patterns.standard.names.country.specific
| pattern                                                | replacement       | country            |
|--------------------------------------------------------+-------------------+--------------------|
| ' PUBLIC LIMITED '                                     | ' PLC '           | UNITED KINGDOM     |
| ' PUBLIC LIABILITY COMPANY '                           | ' PLC '           | UNITED KINGDOM     |
| ' HOLDINGS '                                           | ' HLDGS '         | UNITED KINGDOM     |
| ' HOLDING '                                            | ' HLDGS '         | UNITED KINGDOM     |
| ' GREAT BRITAIN '                                      | ' GB '            | UNITED KINGDOM     |
| ' LTD CO '                                             | ' CO LTD '        | UNITED KINGDOM     |
| ' SOC LIMITADA '                                       | ' SL '            | SPANISH            |
| ' SOC EN COMMANDITA '                                  | ' SC '            | SPANISH            |
| ' & CIA '                                              | ' CO '            | SPANISH            |
| ' SOC IN ACCOMANDITA PER AZIONI '                      | ' SA '            | ITALIAN            |
| ' SAPA '                                               | ' SA '            | ITALIAN            |
| ' SOC A RESPONSABILITÀ LIMITATA '                      | ' SRL '           | ITALIAN            |
| ' HANDELSBOLAG '                                       | ' HB  '           | SWEDISH            |
| ' KOMANDIT GESELLSCHAFT '                              | ' KG '            | GERMAN             |
| ' KOMANDITGESELLSCHAFT '                               | ' KG '            | GERMAN             |
| ' EINGETRAGENE GENOSSENSCHAFT '                        | ' EG '            | GERMAN             |
| ' GENOSSENSCHAFT '                                     | ' EG '            | GERMAN             |
| ' GESELLSCHAFT M B H '                                 | ' GMBH '          | GERMAN             |
| ' OFFENE HANDELS GESELLSCHAFT '                        | ' OHG '           | GERMAN             |
| ' GESMBH '                                             | ' GMBH '          | GERMAN             |
| ' GESELLSCHAFT BURGERLICHEN RECHTS '                   | ' GBR '           | GERMAN             |
| ' GESELLSCHAFT '                                       | ' GMBH '          | GERMAN             |
| ' GMBH CO KG '                                         | ' GMBH & CO KG '  | GERMAN             |
| ' GMBH COKG '                                          | ' GMBH & CO KG '  | GERMAN             |
| ' GMBH U CO KG '                                       | ' GMBH & CO KG '  | GERMAN             |
| ' GMBH U COKG '                                        | ' GMBH & CO KG '  | GERMAN             |
| ' GMBH U CO '                                          | ' GMBH & CO KG '  | GERMAN             |
| ' GMBH CO '                                            | ' GMBH & CO KG '  | GERMAN             |
| ' AG CO KG '                                           | ' AG & CO KG '    | GERMAN             |
| ' AG COKG '                                            | ' AG & CO KG '    | GERMAN             |
| ' AG U CO KG '                                         | ' AG & CO KG '    | GERMAN             |
| ' AG U COKG '                                          | ' AG & CO KG '    | GERMAN             |
| ' AG U CO '                                            | ' AG & CO KG '    | GERMAN             |
| ' AG CO '                                              | ' AG & CO KG '    | GERMAN             |
| ' GMBH CO OHG '                                        | ' GMBH &CO OHG '  | GERMAN             |
| ' GMBH COOHG '                                         | ' GMBH & CO OHG ' | GERMAN             |
| ' GMBH U CO OHG '                                      | ' GMBH & CO OHG ' | GERMAN             |
| ' GMBH U COOHG '                                       | ' GMBH & CO OHG ' | GERMAN             |
| ' AG CO OHG '                                          | ' AG & CO OHG '   | GERMAN             |
| ' AG COOHG '                                           | ' AG & CO OHG '   | GERMAN             |
| ' AG U CO OHG '                                        | ' AG & CO OHG '   | GERMAN             |
| ' AG U COOHG '                                         | ' AG & CO OHG '   | GERMAN             |
| ' SOCIETE ANONYME SIMPLIFIEE '                         | ' SAS '           | FRENCH and BELGIAN |
| ' SOC ANONYME '                                        | ' SA '            | FRENCH and BELGIAN |
| ' STE ANONYME '                                        | ' SA '            | FRENCH and BELGIAN |
| ' SARL UNIPERSONNELLE '                                | ' SARLU '         | FRENCH and BELGIAN |
| ' SOC PAR ACTIONS SIMPLIFIEES '                        | ' SAS '           | FRENCH and BELGIAN |
| ' SAS UNIPERSONNELLE '                                 | ' SASU '          | FRENCH and BELGIAN |
| ' ENTREPRISE UNIPERSONNELLE A RESPONSABILITE LIMITEE ' | ' EURL '          | FRENCH and BELGIAN |
| ' SOCIETE CIVILE IMMOBILIERE '                         | ' SCI '           | FRENCH and BELGIAN |
| ' GROUPEMENT D INTERET ECONOMIQUE '                    | ' GIE '           | FRENCH and BELGIAN |
| ' SOCIETE EN PARTICIPATION '                           | ' SP '            | FRENCH and BELGIAN |
| ' SOCIETE EN COMMANDITE SIMPLE '                       | ' SCS '           | FRENCH and BELGIAN |
| ' ANONYME DITE '                                       | ' SA '            | FRENCH and BELGIAN |
| ' SOC DITE '                                           | ' SA '            | FRENCH and BELGIAN |
| ' & CIE '                                              | ' CO '            | FRENCH and BELGIAN |
| ' BV BEPERKTE AANSPRAKELIJKHEID '                      | ' BVBA '          | BELGIAN            |
| ' COMMANDITAIRE VENNOOTSCHAP OP AANDELEN '             | ' CVA '           | BELGIAN            |
| ' GEWONE COMMANDITAIRE VENNOOTSCHAP '                  | ' GCV '           | BELGIAN            |
| ' SOCIETE EN COMMANDITE PAR ACTIONS '                  | ' SCA '           | BELGIAN            |
| ' ANDELSSELSKABET '                                    | ' AMBA '          | DENMARK            |
| ' ANDELSSELSKAB '                                      | ' AMBA '          | DENMARK            |
| ' INTERESSENTSKABET '                                  | ' IS '            | DENMARK            |
| ' INTERESSENTSKAB '                                    | ' IS '            | DENMARK            |
| ' KOMMANDITAKTIESELSKABET '                            | ' KAS '           | DENMARK            |
| ' KOMMANDITAKTIESELSKAB '                              | ' KAS '           | DENMARK            |
| ' KOMMANDITSELSKABET '                                 | ' KS '            | DENMARK            |
| ' KOMMANDITSELSKAB '                                   | ' KS '            | DENMARK            |
| ' ANDELSLAGET '                                        | ' AL '            | NORWAY             |
| ' ANDELSLAG '                                          | ' AL '            | NORWAY             |
| ' ANSVARLIG SELSKAPET '                                | ' ANS '           | NORWAY             |
| ' ANSVARLIG SELSKAP '                                  | ' ANS '           | NORWAY             |
| ' AKSJESELSKAPET '                                     | ' AS '            | NORWAY             |
| ' AKSJESELSKAP '                                       | ' AS '            | NORWAY             |
| ' ALLMENNAKSJESELSKAPET '                              | ' ASA '           | NORWAY             |
| ' ALLMENNAKSJESELSKAP '                                | ' ASA '           | NORWAY             |
| ' SELSKAP MED DELT ANSAR '                             | ' DA '            | NORWAY             |
| ' KOMMANDITTSELSKAPET '                                | ' KS '            | NORWAY             |
| ' KOMMANDITTSELSKAP '                                  | ' KS '            | NORWAY             |
| ' COMMANDITAIRE VENNOOTSCHAP '                         | ' CV '            | NETHERLANDS        |
| ' COMMANDITAIRE VENNOOTSCHAP OP ANDELEN '              | ' CVOA '          | NETHERLANDS        |
| ' VENNOOTSCHAP ONDER FIRMA '                           | ' VOF '           | NETHERLANDS        |
| ' PUBLIKT AKTIEBOLAG '                                 | ' APB '           | FINLAND            |
| ' KOMMANDIITTIYHTIO '                                  | ' KY '            | FINLAND            |
| ' JULKINEN OSAKEYHTIO '                                | ' OYJ '           | FINLAND            |
| ' SPOLKA AKCYJNA '                                     | ' SA '            | POLAND             |
| ' SPOLKA PRAWA CYWILNEGO '                             | ' SC '            | POLAND             |
| ' SPOLKA KOMANDYTOWA '                                 | ' SK '            | POLAND             |
| ' SPOLKA Z OGRANICZONA ODPOWIEDZIALNOSCIA '            | ' SPZOO '         | POLAND             |
| ' SP Z OO '                                            | ' SPZOO '         | POLAND             |
| ' SPZ OO '                                             | ' SPZOO '         | POLAND             |
| ' SP ZOO '                                             | ' SPZOO '         | POLAND             |
| ' ANONYMOS ETAIRIA '                                   | ' AE '            | GREECE             |
| ' ETERRORRYTHMOS '                                     | ' EE '            | GREECE             |
| ' ETAIRIA PERIORISMENIS EVTHINIS '                     | ' EPE '           | GREECE             |
| ' OMORRYTHMOS '                                        | ' OE '            | GREECE             |
| ' AKCIOVA SPOLECNOST '                                 | ' AS '            | CZECH REPUBLIC     |
| ' KOMANDITNI SPOLECNOST '                              | ' KS '            | CZECH REPUBLIC     |
| ' SPOLECNOST S RUCENIM OMEZENYM '                      | ' SRO '           | CZECH REPUBLIC     |
| ' VEREJNA OBCHODNI SPOLECNOST '                        | ' VOS '           | CZECH REPUBLIC     |
| ' AKTIONIERNO DRUSHESTWO '                             | ' AD '            | BULGARIA           |
| ' KOMANDITNO DRUSHESTWO '                              | ' KD '            | BULGARIA           |
| ' KOMANDITNO DRUSHESTWO S AKZII '                      | ' KDA '           | BULGARIA           |
| ' DRUSHESTWO S ORGRANITSCHENA OTGOWORNOST '            | ' OCD '           | BULGARIA           |


** Stem Name
:PROPERTIES:
:ID:       org:k5q64a51nki0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Creates so called stem name (a name with all legal entity identifiers removed)
  ##'
  ##' @param x object
  ##' @inheritDotParams harmonize.replace
  ##' @return Harmonized table
  ##' 
  ##' @md
  ##' @import magrittr
  ##' @export 
  cockburn.remove.standard.names <- function(x
                                              , ...) {
    harmonize.replace(x
                    , patterns = cockburn.patterns.stem.name
                    , replacements = " "
                    , ...) 
  }

  ## Test
  ## c("WESTINGHOUSE, |.?^&*@ ELEC  "
  ## , "GRACE (W EN R) & CO - Ã²Ã¢ÃªÃ®Ã©  PUBLIC LIMITED "
  ## , "GRACE (W/R) & CO LTD ") %>% 
  ##  cockburn.remove.standard.names
#+END_SRC

creates a name with all legal entity identifiers removed

#+call: make-rds-patterns-table(data = cockburn.patterns.stem.name, data.name = "cockburn.patterns.stem.name")

#+name: cockburn.patterns.stem.name
| pattern             | replacement | country                      |
|---------------------+-------------+------------------------------|
| ' LTD '             | ' '         | UNITED KINGDOM               |
| ' CO LTD '          | ' '         | UNITED KINGDOM               |
| ' TRADING LTD '     | ' '         | UNITED KINGDOM               |
| ' CORP '            | ' '         | UNITED KINGDOM               |
| ' INTL '            | ' '         | UNITED KINGDOM               |
| ' INC '             | ' '         | UNITED KINGDOM               |
| ' PLC '             | ' '         | UNITED KINGDOM               |
| ' SPA '             | ' '         | UNITED KINGDOM               |
| ' CLA '             | ' '         | UNITED KINGDOM               |
| ' LLP '             | ' '         | UNITED KINGDOM               |
| ' LLC '             | ' '         | UNITED KINGDOM               |
| ' AIS '             | ' '         | UNITED KINGDOM               |
| ' INVESTMENTS '     | ' '         | UNITED KINGDOM               |
| ' PARTNERSHIP '     | ' '         | UNITED KINGDOM               |
| ' & CO '            | ' '         | UNITED KINGDOM               |
| ' CO '              | ' '         | UNITED KINGDOM               |
| ' COS '             | ' '         | UNITED KINGDOM               |
| ' CP '              | ' '         | UNITED KINGDOM               |
| ' LP '              | ' '         | UNITED KINGDOM               |
| ' BLSA '            | ' '         | UNITED KINGDOM               |
| ' GROUP '           | ' '         | UNITED KINGDOM               |
| ' SA '              | ' '         | FRANCE                       |
| ' SARL '            | ' '         | FRANCE                       |
| ' SAS '             | ' '         | FRANCE                       |
| ' EURL '            | ' '         | FRANCE                       |
| ' ETCIE '           | ' '         | FRANCE                       |
| ' ET CIE '          | ' '         | FRANCE                       |
| ' CIE '             | ' '         | FRANCE                       |
| ' GIE '             | ' '         | FRANCE                       |
| ' SC '              | ' '         | FRANCE                       |
| ' SNC '             | ' '         | FRANCE                       |
| ' SP '              | ' '         | FRANCE                       |
| ' SCS '             | ' '         | FRANCE                       |
| ' GMBHCOKG '        | ' '         | GERMANY                      |
| ' EGENOSSENSCHAFT ' | ' '         | GERMANY                      |
| ' GMBHCO '          | ' '         | GERMANY                      |
| ' COGMBH '          | ' '         | GERMANY                      |
| ' GESMBH '          | ' '         | GERMANY                      |
| ' GMBH '            | ' '         | GERMANY                      |
| ' KGAA '            | ' '         | GERMANY                      |
| ' KG '              | ' '         | GERMANY                      |
| ' AG '              | ' '         | GERMANY                      |
| ' EG '              | ' '         | GERMANY                      |
| ' GMBHCOKGAA '      | ' '         | GERMANY                      |
| ' MIT '             | ' '         | GERMANY                      |
| ' OHG '             | ' '         | GERMANY                      |
| ' GRUPPE '          | ' '         | GERMANY                      |
| ' GBR '             | ' '         | GERMANY                      |
| ' SL '              | ' '         | Spain                        |
| ' SA '              | ' '         | Spain                        |
| ' SC '              | ' '         | Spain                        |
| ' SRL '             | ' '         | Spain                        |
| ' ESPANA '          | ' '         | Spain                        |
| ' SA '              | ' '         | Italy                        |
| ' SAS '             | ' '         | Italy                        |
| ' SNC '             | ' '         | Italy                        |
| ' SPA '             | ' '         | Italy                        |
| ' SRL '             | ' '         | Italy                        |
| ' AB '              | ' '         | SWEDEN - front and back      |
| ' HB '              | ' '         | SWEDEN - front and back      |
| ' KB '              | ' '         | SWEDEN - front and back      |
| ' SAS '             | ' '         | Belgium and French           |
| ' SA '              | ' '         | Belgium and French           |
| ' SARL '            | ' '         | Belgium and French           |
| ' SARLU '           | ' '         | Belgium and French           |
| ' SAS '             | ' '         | Belgium and French           |
| ' SASU '            | ' '         | Belgium and French           |
| ' EURL '            | ' '         | Belgium and French           |
| ' ETCIE '           | ' '         | Belgium and French           |
| ' CIE '             | ' '         | Belgium and French           |
| ' GIE '             | ' '         | Belgium and French           |
| ' SC '              | ' '         | Belgium and French           |
| ' SNC '             | ' '         | Belgium and French           |
| ' SP '              | ' '         | Belgium and French           |
| ' SCS '             | ' '         | Belgium and French           |
| ' BV '              | ' '         | Specifically Belgian ones    |
| ' CVA '             | ' '         | Specifically Belgian ones    |
| ' SCA '             | ' '         | Specifically Belgian ones    |
| ' SPRL '            | ' '         | Specifically Belgian ones    |
| ' SCS '             | ' '         | French language equivalents  |
| ' SA '              | ' '         | French language equivalents  |
| ' SPRL '            | ' '         | French language equivalents  |
| ' AMBA '            | ' '         | Denmark - front and back     |
| ' APS '             | ' '         | Denmark - front and back     |
| ' AS '              | ' '         | Denmark - front and back     |
| ' IS '              | ' '         | Denmark - front and back     |
| ' KAS '             | ' '         | Denmark - front and back     |
| ' KS '              | ' '         | Denmark - front and back     |
| ' PF '              | ' '         | Denmark - front and back     |
| ' AL '              | ' '         | Norway - front and back      |
| ' ANS '             | ' '         | Norway - front and back      |
| ' AS '              | ' '         | Norway - front and back      |
| ' ASA '             | ' '         | Norway - front and back      |
| ' DA '              | ' '         | Norway - front and back      |
| ' KS '              | ' '         | Norway - front and back      |
| ' BV '              | ' '         | Netherlands - front and back |
| ' CV '              | ' '         | Netherlands - front and back |
| ' CVOA '            | ' '         | Netherlands - front and back |
| ' NV '              | ' '         | Netherlands - front and back |
| ' VOF '             | ' '         | Netherlands - front and back |
| ' AB '              | ' '         | Finland                      |
| ' APB '             | ' '         | Finland                      |
| ' KB '              | ' '         | Finland                      |
| ' KY '              | ' '         | Finland                      |
| ' OY '              | ' '         | Finland                      |
| ' OYJ '             | ' '         | Finland                      |
| ' OYJ AB '          | ' '         | Finland                      |
| ' OY AB '           | ' '         | Finland                      |
| ' LTD '             | ' '         | Finland                      |
| ' PLC '             | ' '         | Finland                      |
| ' INC '             | ' '         | Finland                      |
| ' SA '              | ' '         | Poland                       |
| ' SC '              | ' '         | Poland                       |
| ' SK '              | ' '         | Poland                       |
| ' SPZOO '           | ' '         | Poland                       |
| ' AE '              | ' '         | Greece                       |
| ' EE '              | ' '         | Greece                       |
| ' EPE '             | ' '         | Greece                       |
| ' OE '              | ' '         | Greece                       |
| ' SA '              | ' '         | Greece                       |
| ' LTD '             | ' '         | Greece                       |
| ' PLC '             | ' '         | Greece                       |
| ' INC '             | ' '         | Greece                       |
| ' AS '              | ' '         | Czech Republic               |
| ' KS '              | ' '         | Czech Republic               |
| ' SRO '             | ' '         | Czech Republic               |
| ' VOS '             | ' '         | Czech Republic               |
| ' AD '              | ' '         | Bulgaria                     |
| ' KD '              | ' '         | Bulgaria                     |
| ' KDA '             | ' '         | Bulgaria                     |
| ' OCD '             | ' '         | Bulgaria                     |
| ' KOOP '            | ' '         | Bulgaria                     |
| ' DF '              | ' '         | Bulgaria                     |
| ' EOOD '            | ' '         | Bulgaria                     |
| ' EAD '             | ' '         | Bulgaria                     |
| ' OOD '             | ' '         | Bulgaria                     |
| ' KOOD '            | ' '         | Bulgaria                     |
| ' ET '              | ' '         | Bulgaria                     |
| ' KOGYO KK '        | ' '         | Japan                        |
| ' KK '              | ' '         | Japan                        |



** USPTO special
:PROPERTIES:
:ID:       org:mex64a51nki0
:END:

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
    ##' Removes special USPTO codes.
    ##'
    ##' @param x object
    ##' @inheritDotParams harmonize.replace
    ##' @return Harmonized table
    ##' 
    ##' @md
    ##' @import magrittr
    ##' @export 
    cockburn.remove.uspto <- function(x
                                         , ...) {
      harmonize.replace(x, patterns = cockburn.patterns.uspto, ...) 
    }



    ##' Special USPTO codes. Codes as "indiv"
    ##'
    ##' @param x object
    ##' @inheritDotParams harmonize.detect
    ##' @return Harmonized table
    ##' 
    ##' @md
    ##' @import magrittr
    ##' @export 
    cockburn.detect.uspto <- function(x
                                         , ...) {
      harmonize.detect(x
                     , patterns = ";"
                     , codes = "indiv"
                     , codes.name = "entity.type"
                     , return.only.first.detected.code = TRUE
                     , ...) 
    }

    ## ## Test
    ## c("WESTINGHOUSE, |.?^&*@ ELEC-CONN.  "
    ## , "GRACE-CONN. (W EN R) & CO - Ã²Ã¢ÃªÃ®Ã©  PUBLIC LIMITED "
    ## , "Bechara;John") %>% 
    ##  cockburn.remove.uspto.code

    ## c("WESTINGHOUSE, |.?^&*@ ELEC-CONN.  "
    ## , "GRACE-CONN. (W EN R) & CO - Ã²Ã¢ÃªÃ®Ã©  PUBLIC LIMITED "
    ## , "Bechara;John") %>% 
    ##   cockburn.detect.uspto.code
#+END_SRC



#+call: make-rds-patterns-table(data = cockburn.patterns.uspto, data.name = "cockburn.patterns.uspto")

#+name: cockburn.patterns.uspto
| pattern  | replacement |
|----------+-------------|
| '-CONN.' | ''          |
| ';'      | ' ; '       |

* Combined Cockburn Procedures
** main_coname2.do
:PROPERTIES:
:ID:       org:ns374a51nki0
:END:

#+NAME: cockburn.procedures.table
| no | message                                                     | function.call                                    |
|----+-------------------------------------------------------------+--------------------------------------------------|
|    | *Prepossessing*                                             |                                                  |
|  1 | Cleaning spaces                                             | 'harmonize.squish.spaces', wrap.in.spaces = TRUE |
|  2 | Upper casing                                                | 'harmonize.toupper'                              |
|    |                                                             |                                                  |
|    | *Standartization*                                           |                                                  |
|  3 | Special removals and recoding for USPTO names               | 'cockburn.detect.uspto'                          |
|  4 | Standardization of symbols and removals of some punctuation | 'cockburn.replace.punctuation'                   |
|  5 | Standardization of names (Derwent, etc.)                    | 'cockburn.replace.standard.names'                |
|  6 | Identification of organization type                         | 'cockburn.detect.type'                           |
|  7 | Cleaning organization type                                  | 'cockburn.replace.type'                          |
|  8 | Combining single char sequences                             | 'cockburn.combabbrev'                            |
|  9 | Removal of legal entity identifiers                         | 'cockburn.remove.standard.names'                 |
| 10 | Cleaning spaces                                             | 'harmonize.squish.spaces'                        |

#+call: make-rds-patterns-table(data = cockburn.procedures.table, data.name = "cockburn.procedures.table", remove.single.quotes = "FALSE")

#+BEGIN_SRC R :results silent :session :tangle ../R/cockburn.r :mkdirp yes
  ##' Harmonizes strings using exact procedures described in Cockburn, et al. (2009)
  ##' @param x table or vector
  ##' @param cockburn.procedures list of procedures to pass to `harmonize` function. Default is `cockburn.procedures.list`
  ##' @param detect.legal.form Whether to detect legal forms. Default is FALSE
  ##' @param return.x.before.common.words.removal Whether to save harmonized column before `common.words.removal` procedure. Default is FALSE
  ##' @param return.x.cols.all Whether to return initial column in x. Default is FALSE
  ##' @inheritDotParams harmonize
  ##' @return Harmonized table
  ##'
  ##' @references Cockburn, et al. (2009)
  ##' 
  ##' @md 
  ##' @import magrittr
  ##' @export 
  harmonize.cockburn <- function(x
                               , cockburn.procedures = cockburn.procedures.table
                               , detect.legal.form = FALSE
                               , return.x.before.common.words.removal = FALSE
                               , return.x.cols.all = FALSE
                               , ... ) {
      if(is.data.frame(cockburn.procedures)) {
          cockburn.procedures %<>% harmonize.make.procedures.list
      }
    ## do some tweaks on cockburn.procedures
    if(!detect.legal.form) {
      cockburn.procedures %<>%
        extract(sapply(., extract2, 1) %>%
                is_in(c("cockburn.detect.type"
                      , "cockburn.detect.uspto")) %>%
                not)
    }
    if(return.x.before.common.words.removal) {
      cockburn.procedures %<>% 
        inset2(sapply(., extract2, 1) %>%
               equals("cockburn.remove.standard.names") %>%
               which
             , list("cockburn.remove.standard.names"
                  , return.x.cols.all = TRUE))
    }
    if(return.x.cols.all) {
      cockburn.procedures %<>% 
        inset2(1, c(as.list(extract2(.,1))
                  , return.x.cols.all = TRUE))
    }
    harmonize(x, cockburn.procedures, ...)
  }

#+END_SRC

#+BEGIN_SRC R :tangle no
  ## Test
   data.table(name = c("MÄKARÖNI ETÖ FKÜSNÖ Ltd"
                     , "M S Lab CÖ. <a href=lsdldf> <br> <\\a>"
                     , "MSLab Co."
                     , "MSLaeb Comp."
                     , "MSLab Comp. Ltd."
                     , "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝŸ") %>% rep(20)
            , foo = "Coffee" ) %>%
     ## harmonize.cockburn()
     ## harmonize.cockburn(detect.legal.form = TRUE)
     ## harmonize.cockburn(return.x.cols.all = TRUE)
     ## harmonize.cockburn(return.x.before.common.words.removal = TRUE)
     harmonize.cockburn(progress.min = 100
                      , detect.legal.form = TRUE)
#+END_SRC

* Old Code

:PROPERTIES:
:ID:       org:k43ijzz0cai0
:END:
:LOGBOOK:
- Refiled on [2019-07-19 Fri 12:08]
:END:

#+BEGIN_SRC R :results silent :tangle no :mkdirp yes

  ## sequence used in NBER PDP
  ## ................................................................................
  ## - 0 leading and trimming spaces
  ## - 1 punctuation2
  ## - 2 derwent 
  ## - 3 standard_name 
  ## - 4 corporates
  ## - 5 (combabbrev) - it is just coding for legal form
  ## - 6 (stem_name) - I left common names untouched


  ## Define functions for harmonization
  ## ================================================================================
  ## Load Substitution Rules
  ## ================================================================================

  ## Path for files with substitutions
  delayedAssign("inst.dir", system.file(package = "harmonizer"))
  ## inst.dir <- file.path("../inst")  # for testing
  ## Specify accented char to replace with ascii equivalents
  ## Note: a" wraper for delayedAssign() is %<d-% from pryr package
  delayedAssign("harmonization.accented"
              , file.path(inst.dir, "ascii-equivalents/accented-chars.txt") %>% 
                readLines(encoding = "UTF-8") %>%
                enc2utf8)
  ## Specify folders to scan for CSV with substitutions
  delayedAssign("harmonization.dirs"
              , c("nber-pdp-harmonization"
                  ## , "magerman-harmonization"
                , "additional-harmonization"))
  delayedAssign("harmonization.files"
              , (sapply(file.path(inst.dir, harmonization.dirs)
                      , list.files
                      , pattern = ".csv$", full.names = TRUE) %>% unlist))
  delayedAssign("harmonization.names"
              , basename(harmonization.files) %>%
                str_replace(".csv$", ""))
  ## Load all CSVs into list
  delayedAssign("harmonization.tabs"
              , lapply(harmonization.files, function(file) {
                  ## packageStartupMessage("* Loading substitutions: "
                  ##                     , basename(file))
                  read.csv(file
                         , header = FALSE
                         , col.names = c("del", "ins")
                         , as.is = TRUE
                         , colClasses = c("character", "character")
                         , na.strings = NULL
                         , comment.char = "#"
                         , strip.white = TRUE
                         , encoding = "UTF-8")
              }) %>% setNames(harmonization.names))
  ## Get list of system encodings (should save time)
  delayedAssign("harmonizer.enc.list", iconvlist())










  ## Test
  ## apply.harmonization("!s!df,.sdf,.sd LTD, CO", c("nber-punctuation"
  ##                                               , "nber-stem-name"))


  ## Wrapers for harmonizations
  ## ================================================================================
  #' @import magrittr
  apply.nber <- function(org.names) {
      org.names %>% 
          apply.harmonization(c("additional-name-only"
                              , "nber-nameonly")) %>% 
          apply.harmonization("nber-punctuation"
                            , add.spaces = FALSE
                            , del.spaces = FALSE) %>%
          remove.quotes %>% 
          apply.harmonization(c("additional-substitutions"
                              , "nber-standard-name"
                              , "nber-univ"
                              , "nber-derwent")) %>%
          apply.harmonization("additional-regex"
                            , regex = TRUE
                            , add.spaces = FALSE) %>% 
          apply.harmonization(c("additional-removals"
                              , "nber-stem-name")
                            , add.spaces = "right")
  }


  ## Test
  ## apply.nber("LTD,LAL,LDF&^*($), &CO. LIMITED")


  ## I see that there is quite a lot of umlauts in harmonization replacements
  ## So it should be either at the end or more sophisticated
  ## str_subset(harmonization.tabs %>% rbindlist %>% extract2("ins"), "UE|AE|OE")
  #' @import magrittr
  apply.ulmaut <- function(org.names) {
      org.names %>% 
          apply.harmonization("nber-umlaut")
  }


  #' @import magrittr
  apply.derwent <- function(org.names) {
      org.names %>% 
          apply.harmonization("nber-derwent")
  }

  #' @import magrittr
  apply.nber.sansremovals <- function(org.names) {
      org.names %>% 
          apply.harmonization(c("additional-name-only"
                              , "nber-nameonly")) %>% 
          apply.harmonization("nber-punctuation"
                            , add.spaces = FALSE
                            , del.spaces = FALSE) %>%
          remove.quotes %>% 
          apply.harmonization(c("additional-substitutions"
                              , "nber-standard-name"
                              , "nber-univ"
                              , "nber-derwent")) %>% 
          apply.harmonization("additional-regex"
                            , regex = TRUE
                            , add.spaces = FALSE) 
  }

  #' it assumes that there is no removals for the first word
  #' @import magrittr
  apply.nber.removals <- function(org.names) {
      org.names %>% 
          apply.harmonization(c("additional-removals"
                              , "nber-stem-name")
                            , add.spaces = "right")
  }


  #' @import magrittr
  apply.nber.sansderwent.sansremovals <- function(org.names) {
      org.names %>% 
          apply.harmonization(c("additional-name-only"
                              , "nber-nameonly")) %>% 
          apply.harmonization("nber-punctuation"
                            , add.spaces = FALSE
                            , del.spaces = FALSE) %>%
          remove.quotes %>% 
          apply.harmonization(c("additional-substitutions"
                              , "nber-standard-name"
                              , "nber-univ")) %>% 
          apply.harmonization("additional-regex"
                            , regex = TRUE
                            , add.spaces = FALSE)
  }

  #' @import magrittr
  apply.nber.sansderwent <- function(org.names) {
      org.names %>% 
          apply.harmonization(c("additional-name-only"
                              , "nber-nameonly")) %>% 
          apply.harmonization("nber-punctuation"
                            , add.spaces = FALSE
                            , del.spaces = FALSE) %>%
          remove.quotes %>% 
          apply.harmonization(c("additional-substitutions"
                              , "nber-standard-name"
                              , "nber-univ")) %>%
          apply.harmonization("additional-regex"
                            , regex = TRUE
                            , add.spaces = FALSE) %>% 
          apply.harmonization(c("additional-removals"
                              , "nber-stem-name")
                            , add.spaces = "right")
  }


  #' @import magrittr
  apply.punctuation <- function(org.names) {
      org.names %>% 
          apply.harmonization("nber-punctuation"
                            , add.spaces = FALSE
                            , del.spaces = FALSE) %>%
          remove.quotes
  }

#+END_SRC


#+BEGIN_SRC R  :tangle no
       ## Subsitutes strings
      #' @import magrittr stringi stringr data.table
      apply.harmonization <- function(org.names
                                    , harmonization.names
                                    , add.spaces = "both"
                                    , del.spaces = TRUE
                                    , regex = FALSE) {
        if(del.spaces) org.names %<>% remove.spaces
        if(add.spaces == "right")
          org.names %<>%  paste0(" ")  # add space at the end
        if(add.spaces == "both")
          org.names %<>% {paste0(" ",. , " ")}  # add space at the end
        harmonization.tab <-
          harmonization.tabs[harmonization.names] %>%
          rbindlist
        if(regex) org.names %<>% stri_replace_all_regex(harmonization.tab$del
                                                      , harmonization.tab$ins
                                                      , vectorize_all = FALSE)
        else org.names %<>% stri_replace_all_fixed(harmonization.tab$del
                                                 , harmonization.tab$ins
                                                 , vectorize_all = FALSE)
        return(org.names)
      }


    ## Apply Magerman Example:
    ## , magerman.remove.common.words
    ## , magerman.clean.punctuation
    ## , list(magerman.do.something, col = 2)
    ## , magerman.clean.punctuation
#+END_SRC

** Tests and experiments (no tangle)

#+BEGIN_SRC R :results silent :tangle no
  ## Examples
  ## --------------------------------------------------------------------------------

  ## Testing progress indication
  ## harmonize(as.character(1:100000), progress.by = 1000) %>% class

  ## comp.example <- c("žŸong-ÂÃÇÈÏa\n\u00b5 &oacute;\u00b5<p>,  INt LTD &AMP; Co;  "
  ##                 , "<br> the $ (&AMP; C&oacute;MP comPANY) Ïotta"
  ##                 , "Tempshield Cryo-Protection™"
  ##                 , "Ábcdêãçoàúü"
  ##                 , "Polgen Sp. z o.o. <U+0096> Sp. K."
  ##                 , "Polgen Sp. z o.o. – Sp. K."
  ##                 , "Jerome® <br>"
  ##                 , "Controlled Environments®  Magazine"
  ##                 , "a\n\u00b5\u00b5"
  ##                 , "fa\xE7ile"
  ##                 , "fa\xc3\xa7ile"
  ##                 , "MSlab CO. CO., LTD."
  ##                 , "MSlab, A \\SOCIETE ANONYME\\"
  ##                 , "S.A.S. University Co., {PE}, Ltd. (Europe)"
  ##                 , "Analytical Technologies Limited"
  ##                 , "Anasys Instruments Corporation"
  ##                 , "C4 Control de Contaminacion Ltda"
  ##                 , "Crescent Scientific Pvt Ltd."
  ##                 , "Daigger & Co., Inc."
  ##                 , "Dell Inc."
  ##                 , "Deltalab. S.L.U."
  ##                 , "DLAB Scientific Co.,Ltd."
  ##                 , "ebro Electronic GmbH und Co. KG"
  ##                 , "Ecom spol. s r.o., s.r.o., akc. spol."
  ##                 , "G.A.S. mbH"
  ##                 , "Glassco Laboratory Equipments PVT LTD"
  ##                 , "Lhasa Limited"
  ##                 , "rose plastic USA, LLLP"
  ##                 , "a;sdkfjsdlkfj;laswee\'\" asdf Co.")

  ## comp.example %>% harmonize(quite = TRUE
  ##                          , include.original = TRUE)

  ## ## Testing Magerman

  ## harmonization.tabs[["additional-magerman"]]$del %>%
  ##     {cbind(harmonize( .,quite = TRUE
  ##             , include.original = TRUE
  ##             , procedures = list(
  ##                   list("toascii", TRUE)
  ##                 , "tolower"
  ##                 , "html2txt"
  ##                 , list("toascii", FALSE)
  ##                 , "remove.brackets"
  ##                 , "toupper"
  ##                 , "remove.quotes"
  ##                 , "apply.nber.sansremovals"
  ##                 , "trims"
  ##               )
  ##               )
  ##            , harm.rem = harmonize(.,quite = TRUE
  ##             , procedures = list(
  ##                   list("toascii", TRUE)
  ##                 , "tolower"
  ##                 , "html2txt"
  ##                 , list("toascii", FALSE)
  ##                 , "remove.brackets"
  ##                 , "toupper"
  ##                 , "remove.quotes"
  ##                 , "apply.nber.sansremovals"
  ##                 , list("apply.harmonization"
  ##                      , c("additional-removals", "nber-stem-name")
  ##                      , add.spaces = "both")
  ##                 , "trims"
  ##               )))}


  ## Magerman et al. (2006) harmonization
  ## harm.magerman <- system.file(package = "harmonizer") %>%
  ##     file.path("magerman-harmonization", "magerman-harmonization.csv") %>%
  ##     read.csv(header = FALSE, stringsAsFactors = FALSE)

  ## harm.magerman <- file.path("..", "inst", "magerman-harmonization"
  ##                          , "magerman-legal-entities.csv") %>%
  ##     read.csv(header = FALSE
  ##            , stringsAsFactors = FALSE
  ##              , strip.white = TRUE
  ##            , quote = "\"")

  ## library("harmonizer")

  ## data.frame(origin = harm.magerman[[1]] %>%
  ##                      {paste0("MSlab", .)}
  ##          , harm = harm.magerman[[1]] %>%
  ##                    {paste0("MSlab", .)} %>%
  ##                    harmonize
  ##          , magerman = harm.magerman[[3]] %>% 
  ##                        {paste0("MSlab", .)}
  ##          , magerman.harm = harm.magerman[[3]] %>% 
  ##                             {paste0("MSlab", .)} %>% harmonize) %>%
  ##     write.csv("test.csv")



  ## TODO
  ## Detects type of organization based on clues from 'harm.codes.list'
  ##' @import magrittr stringi
  ## harm.detect <- function(org.names, harm.codes.list, add.spaces = TRUE){
  ##     if(add.spaces) {
  ##         org.names <- paste(" ", org.names, " ")  # add spaces
  ##     }
  ##     lapply(org.names, function(org)
  ##         stri_detect_fixed(org, harm.codes.list$ins) %>%
  ##         harm.codes.list$del[.] %>%
  ##         ##head(n = 1) %>%
  ##         str_c(collapse = "-") %>%  # for combinations
  ##         ifelse(length(.) == 0, "unknown", .)) %>% unlist
  ## }

  ## Testing
  ## harm.detect(
  ##     c("lala  UNIV LTD "
  ##     , "<br> asdf $ &AMP; &oacute; lala Ï a\n\u00b5\u00b5")
  ## , harm.codes.list)

 
#+END_SRC





* Local Variables

Set local variables for tangling tables into .rds files and adding them to R/sysdata.rda

: Local Variables:
: eval: (org-babel-lob-ingest "./../harmonizer.code.org")
: End:
